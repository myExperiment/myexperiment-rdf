<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MyExperiment RDF: inc/functions/class.uuid.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MyExperiment RDF&#160;<span id="projectnumber">beta</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>inc/functions/class.uuid.php</h1>  </div>
</div>
<div class="contents">
<a href="class_8uuid_8php.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00010"></a>00010 <span class="comment">/*-</span>
<a name="l00011"></a>00011 <span class="comment"> * Copyright (c) 2008 Fredrik Lindberg - http://www.shapeshifter.se</span>
<a name="l00012"></a>00012 <span class="comment"> * All rights reserved.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * Redistribution and use in source and binary forms, with or without</span>
<a name="l00015"></a>00015 <span class="comment"> * modification, are permitted provided that the following conditions</span>
<a name="l00016"></a>00016 <span class="comment"> * are met:</span>
<a name="l00017"></a>00017 <span class="comment"> * 1. Redistributions of source code must retain the above copyright</span>
<a name="l00018"></a>00018 <span class="comment"> *    notice, this list of conditions and the following disclaimer.</span>
<a name="l00019"></a>00019 <span class="comment"> * 2. Redistributions in binary form must reproduce the above copyright</span>
<a name="l00020"></a>00020 <span class="comment"> *    notice, this list of conditions and the following disclaimer in the</span>
<a name="l00021"></a>00021 <span class="comment"> *    documentation and/or other materials provided with the distribution.</span>
<a name="l00022"></a>00022 <span class="comment"> *</span>
<a name="l00023"></a>00023 <span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS&#39;&#39; AND ANY EXPRESS OR</span>
<a name="l00024"></a>00024 <span class="comment"> * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES</span>
<a name="l00025"></a>00025 <span class="comment"> * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00026"></a>00026 <span class="comment"> * IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,</span>
<a name="l00027"></a>00027 <span class="comment"> * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT</span>
<a name="l00028"></a>00028 <span class="comment"> * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span>
<a name="l00029"></a>00029 <span class="comment"> * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span>
<a name="l00030"></a>00030 <span class="comment"> * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span>
<a name="l00031"></a>00031 <span class="comment"> * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF</span>
<a name="l00032"></a>00032 <span class="comment"> * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00033"></a>00033 <span class="comment"> *</span>
<a name="l00034"></a>00034 <span class="comment"> */</span>
<a name="l00035"></a>00035 
<a name="l00040"></a><a class="code" href="classUUID.html">00040</a> <span class="keyword">class </span><a class="code" href="classUUID.html" title="UUID (RFC4122) Generator, see http://tools.ietf.org/html/rfc4122. Implements versiona 1...">UUID</a> {
<a name="l00041"></a>00041     <span class="comment">/* UUID versions */</span>
<a name="l00042"></a>00042 
<a name="l00044"></a><a class="code" href="classUUID.html#a6f0261832d813145892da6e6858c6ace">00044</a>     <span class="keyword">const</span> <a class="code" href="classUUID.html#a6f0261832d813145892da6e6858c6ace" title="Time based UUID.">UUID_TIME</a>     = 1;    
<a name="l00046"></a><a class="code" href="classUUID.html#af1839d37bcecbc4729b235c08a25ffbc">00046</a>     <span class="keyword">const</span> <a class="code" href="classUUID.html#af1839d37bcecbc4729b235c08a25ffbc" title="Name based (MD5) UUID.">UUID_NAME_MD5</a>     = 3;
<a name="l00048"></a><a class="code" href="classUUID.html#a054428414e1a55f4f3cfefe7b8d43fb0">00048</a>     <span class="keyword">const</span> <a class="code" href="classUUID.html#a054428414e1a55f4f3cfefe7b8d43fb0" title="Random UUID.">UUID_RANDOM</a>     = 4;   
<a name="l00050"></a><a class="code" href="classUUID.html#a4e17a0852f6194b41b2b9338684720bc">00050</a>     <span class="keyword">const</span> <a class="code" href="classUUID.html#a4e17a0852f6194b41b2b9338684720bc" title="Name based (SHA1) UUID.">UUID_NAME_SHA1</a>     = 5;
<a name="l00051"></a>00051 
<a name="l00052"></a>00052     <span class="comment">/* UUID formats */</span>
<a name="l00053"></a>00053      
<a name="l00055"></a><a class="code" href="classUUID.html#a02e63fa3e4bd86f98d511907313bd76c">00055</a>     <span class="keyword">const</span> <a class="code" href="classUUID.html#a02e63fa3e4bd86f98d511907313bd76c" title="Field format.">FMT_FIELD</a>     = 100;
<a name="l00057"></a><a class="code" href="classUUID.html#a6b27d1bd637e4ee9342651a4a1fbca08">00057</a>     <span class="keyword">const</span> <a class="code" href="classUUID.html#a6b27d1bd637e4ee9342651a4a1fbca08" title="String format.">FMT_STRING</a>     = 101;
<a name="l00059"></a><a class="code" href="classUUID.html#a21002d811dd5471517331b71ee1d3389">00059</a>     <span class="keyword">const</span> <a class="code" href="classUUID.html#a21002d811dd5471517331b71ee1d3389" title="Binary format.">FMT_BINARY</a>     = 102;
<a name="l00061"></a><a class="code" href="classUUID.html#ad950748f0918362807d3815ea4ba788b">00061</a>     <span class="keyword">const</span> <a class="code" href="classUUID.html#ad950748f0918362807d3815ea4ba788b" title="Quad-word format, 128-bit (not impl.)">FMT_QWORD</a>     = 1;
<a name="l00063"></a><a class="code" href="classUUID.html#a23716985f4b4078a1a0bfe699fc0ee0b">00063</a>     <span class="keyword">const</span> <a class="code" href="classUUID.html#a23716985f4b4078a1a0bfe699fc0ee0b" title="Double-word format, 64-bit (not impl.)">FMT_DWORD</a>     = 2;   
<a name="l00065"></a><a class="code" href="classUUID.html#a5087b6eb95e560be30f1a7296441f3b3">00065</a>     <span class="keyword">const</span> <a class="code" href="classUUID.html#a5087b6eb95e560be30f1a7296441f3b3" title="Word format, 32-bit (not impl.)">FMT_WORD</a>         = 4; 
<a name="l00067"></a><a class="code" href="classUUID.html#a42f3b0893368772f7c75dad56c3e4b3c">00067</a>     <span class="keyword">const</span> <a class="code" href="classUUID.html#a42f3b0893368772f7c75dad56c3e4b3c" title="Short format (not impl.)">FMT_SHORT</a>        = 8;
<a name="l00069"></a><a class="code" href="classUUID.html#aa13b5836fbed8979b86eaabd9e9505df">00069</a>     <span class="keyword">const</span> <a class="code" href="classUUID.html#aa13b5836fbed8979b86eaabd9e9505df" title="Byte format.">FMT_BYTE</a>        = 16;
<a name="l00071"></a><a class="code" href="classUUID.html#a9dbda60da92f39354a70e5c490075a5c">00071</a>     <span class="keyword">const</span> <a class="code" href="classUUID.html#a9dbda60da92f39354a70e5c490075a5c" title="Default format (byte)">FMT_DEFAULT</a>     = 16;
<a name="l00072"></a>00072 
<a name="l00074"></a><a class="code" href="classUUID.html#aa94cdfbceb065aa5e505ff5e3b31c2c3">00074</a>     <span class="keyword">static</span> <span class="keyword">private</span> <a class="code" href="classUUID.html#aa94cdfbceb065aa5e505ff5e3b31c2c3" title="Field UUID representation.">$m_uuid_field</a> = array(
<a name="l00075"></a>00075         <span class="stringliteral">&#39;time_low&#39;</span> =&gt; 0,        <span class="comment">/* 32-bit */</span>
<a name="l00076"></a>00076         <span class="stringliteral">&#39;time_mid&#39;</span> =&gt; 0,        <span class="comment">/* 16-bit */</span>
<a name="l00077"></a>00077         <span class="stringliteral">&#39;time_hi&#39;</span> =&gt; 0,            <span class="comment">/* 16-bit */</span>
<a name="l00078"></a>00078         <span class="stringliteral">&#39;clock_seq_hi&#39;</span> =&gt; 0,        <span class="comment">/*  8-bit */</span>
<a name="l00079"></a>00079         <span class="stringliteral">&#39;clock_seq_low&#39;</span> =&gt; 0,        <span class="comment">/*  8-bit */</span>
<a name="l00080"></a>00080         <span class="stringliteral">&#39;node&#39;</span> =&gt; array()        <span class="comment">/* 48-bit */</span>
<a name="l00081"></a>00081     );
<a name="l00082"></a>00082 
<a name="l00084"></a><a class="code" href="classUUID.html#a5dd5fe8cb6d9ebda727ab2d755df8053">00084</a>     <span class="keyword">static</span> <span class="keyword">private</span> <a class="code" href="classUUID.html#a5dd5fe8cb6d9ebda727ab2d755df8053" title="Array associating versions of UUID with functions to generate them.">$m_generate</a> = array(
<a name="l00085"></a>00085         self::UUID_TIME =&gt; <span class="stringliteral">&quot;generateTime&quot;</span>,
<a name="l00086"></a>00086         self::UUID_RANDOM =&gt; <span class="stringliteral">&quot;generateRandom&quot;</span>,
<a name="l00087"></a>00087         self::UUID_NAME_MD5 =&gt; <span class="stringliteral">&quot;generateNameMD5&quot;</span>,
<a name="l00088"></a>00088         self::UUID_NAME_SHA1 =&gt; <span class="stringliteral">&quot;generateNameSHA1&quot;</span>
<a name="l00089"></a>00089     );
<a name="l00090"></a>00090 
<a name="l00092"></a><a class="code" href="classUUID.html#a82ecfb86957ca2baffbce9b96aa4b8b7">00092</a>     <span class="keyword">static</span> <span class="keyword">private</span> <a class="code" href="classUUID.html#a82ecfb86957ca2baffbce9b96aa4b8b7" title="Multi-dimensional array associating format with the formats it can be converted to and the functions ...">$m_convert</a> = array(
<a name="l00093"></a>00093         self::FMT_FIELD =&gt; array(
<a name="l00094"></a>00094             self::FMT_BYTE =&gt; <span class="stringliteral">&quot;conv_field2byte&quot;</span>,
<a name="l00095"></a>00095             self::FMT_STRING =&gt; <span class="stringliteral">&quot;conv_field2string&quot;</span>,
<a name="l00096"></a>00096             self::FMT_BINARY =&gt; <span class="stringliteral">&quot;conv_field2binary&quot;</span>
<a name="l00097"></a>00097         ),
<a name="l00098"></a>00098         self::FMT_BYTE =&gt; array(
<a name="l00099"></a>00099             self::FMT_FIELD =&gt; <span class="stringliteral">&quot;conv_byte2field&quot;</span>,
<a name="l00100"></a>00100             self::FMT_STRING =&gt; <span class="stringliteral">&quot;conv_byte2string&quot;</span>,
<a name="l00101"></a>00101             self::FMT_BINARY =&gt; <span class="stringliteral">&quot;conv_byte2binary&quot;</span>
<a name="l00102"></a>00102         ),
<a name="l00103"></a>00103         self::FMT_STRING =&gt; array(
<a name="l00104"></a>00104             self::FMT_BYTE =&gt; <span class="stringliteral">&quot;conv_string2byte&quot;</span>,
<a name="l00105"></a>00105             self::FMT_FIELD =&gt; <span class="stringliteral">&quot;conv_string2field&quot;</span>,
<a name="l00106"></a>00106             self::FMT_BINARY =&gt; <span class="stringliteral">&quot;conv_string2binary&quot;</span>
<a name="l00107"></a>00107         ),
<a name="l00108"></a>00108     );
<a name="l00109"></a>00109 
<a name="l00120"></a><a class="code" href="classUUID.html#aea78744f867c4950f15ec8bfd4b71c5b">00120</a>     <span class="keyword">static</span> <span class="keyword">private</span> function <a class="code" href="classUUID.html#aea78744f867c4950f15ec8bfd4b71c5b" title="Swap byte order of a 32-bit number.">swap32</a>($x) {
<a name="l00121"></a>00121         <span class="keywordflow">return</span> (($x &amp; 0x000000ff) &lt;&lt; 24) | (($x &amp; 0x0000ff00) &lt;&lt; 8) |
<a name="l00122"></a>00122             (($x &amp; 0x00ff0000) &gt;&gt; 8) | (($x &amp; 0xff000000) &gt;&gt; 24);
<a name="l00123"></a>00123     }
<a name="l00124"></a>00124 
<a name="l00135"></a><a class="code" href="classUUID.html#a27282c88cc7d2d64ee348aa31552347a">00135</a>     <span class="keyword">static</span> <span class="keyword">private</span> function <a class="code" href="classUUID.html#a27282c88cc7d2d64ee348aa31552347a" title="Swap byte order of a 16-bit number.">swap16</a>($x) {
<a name="l00136"></a>00136         <span class="keywordflow">return</span> (($x &amp; 0x00ff) &lt;&lt; 8) | (($x &amp; 0xff00) &gt;&gt; 8);
<a name="l00137"></a>00137     }
<a name="l00138"></a>00138 
<a name="l00148"></a><a class="code" href="classUUID.html#a732429230a46ad2b47855d0ce35d591f">00148</a>     <span class="keyword">static</span> <span class="keyword">private</span> function <a class="code" href="classUUID.html#a732429230a46ad2b47855d0ce35d591f" title="Auto-detect UUID format.">detectFormat</a>($src) {
<a name="l00149"></a>00149         <span class="keywordflow">if</span> (is_string($src))
<a name="l00150"></a>00150             <span class="keywordflow">return</span> <a class="code" href="classUUID.html#a6b27d1bd637e4ee9342651a4a1fbca08" title="String format.">self::FMT_STRING</a>;
<a name="l00151"></a>00151         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (is_array($src)) {
<a name="l00152"></a>00152             $len = count($src);
<a name="l00153"></a>00153             <span class="keywordflow">if</span> ($len == 1 || ($len % 2) == 0)
<a name="l00154"></a>00154                 <span class="keywordflow">return</span> $len;
<a name="l00155"></a>00155             <span class="keywordflow">else</span>
<a name="l00156"></a>00156                 <span class="keywordflow">return</span> (-1);
<a name="l00157"></a>00157         }
<a name="l00158"></a>00158         <span class="keywordflow">else</span>
<a name="l00159"></a>00159             <span class="keywordflow">return</span> <a class="code" href="classUUID.html#a21002d811dd5471517331b71ee1d3389" title="Binary format.">self::FMT_BINARY</a>;
<a name="l00160"></a>00160     }
<a name="l00161"></a>00161 
<a name="l00181"></a><a class="code" href="classUUID.html#a8ef8f3ffa41de2d4f6f8025720184944">00181</a>     <span class="keyword">static</span> <span class="keyword">public</span> function <a class="code" href="classUUID.html#a8ef8f3ffa41de2d4f6f8025720184944" title="Public API, generate a UUID of &amp;#39;type&amp;#39; in format &amp;#39;fmt&amp;#39; for the given namespace &amp;#39;ns...">generate</a>($type, $fmt = self::FMT_BYTE, $node = <span class="stringliteral">&quot;&quot;</span>, $ns = <span class="stringliteral">&quot;&quot;</span>) {
<a name="l00182"></a>00182         $func = self::$m_generate[$type];
<a name="l00183"></a>00183         <span class="keywordflow">if</span> (!isset($func))
<a name="l00184"></a>00184             <span class="keywordflow">return</span> null;
<a name="l00185"></a>00185         $conv = self::$m_convert[<a class="code" href="classUUID.html#a02e63fa3e4bd86f98d511907313bd76c" title="Field format.">self::FMT_FIELD</a>][$fmt];
<a name="l00186"></a>00186 
<a name="l00187"></a>00187         $uuid = self::$func($ns, $node);
<a name="l00188"></a>00188         <span class="keywordflow">return</span> self::$conv($uuid);
<a name="l00189"></a>00189     }
<a name="l00190"></a>00190 
<a name="l00206"></a><a class="code" href="classUUID.html#a307f40cb92be97ac8183d9ab690c0783">00206</a>     <span class="keyword">static</span> <span class="keyword">public</span> function <a class="code" href="classUUID.html#a307f40cb92be97ac8183d9ab690c0783" title="Public API, convert a UUID from one format to another.">convert</a>($uuid, $from, $to) {
<a name="l00207"></a>00207         $conv = self::$m_convert[$from][$to];
<a name="l00208"></a>00208         <span class="keywordflow">if</span> (!isset($conv))
<a name="l00209"></a>00209             <span class="keywordflow">return</span> ($uuid);
<a name="l00210"></a>00210 
<a name="l00211"></a>00211         <span class="keywordflow">return</span> (self::$conv($uuid));
<a name="l00212"></a>00212     }
<a name="l00213"></a>00213 
<a name="l00226"></a><a class="code" href="classUUID.html#a54e3c2b17b5c89eff624e86320f759d7">00226</a>     <span class="keyword">static</span> <span class="keyword">private</span> function <a class="code" href="classUUID.html#a54e3c2b17b5c89eff624e86320f759d7" title="Generate an UUID version 4 (pseudo random).">generateRandom</a>($ns, $node) {
<a name="l00227"></a>00227         $uuid = <a class="code" href="classUUID.html#aa94cdfbceb065aa5e505ff5e3b31c2c3" title="Field UUID representation.">self::$m_uuid_field</a>;
<a name="l00228"></a>00228 
<a name="l00229"></a>00229         $uuid[<span class="stringliteral">&#39;time_hi&#39;</span>] = (4 &lt;&lt; 12) | (mt_rand(0, 0x1000));
<a name="l00230"></a>00230         $uuid[<span class="stringliteral">&#39;clock_seq_hi&#39;</span>] = (1 &lt;&lt; 7) | mt_rand(0, 128);
<a name="l00231"></a>00231         $uuid[<span class="stringliteral">&#39;time_low&#39;</span>] = mt_rand(0, 0xffff) + (mt_rand(0, 0xffff) &lt;&lt; 16);
<a name="l00232"></a>00232         $uuid[<span class="stringliteral">&#39;time_mid&#39;</span>] = mt_rand(0, 0xffff);
<a name="l00233"></a>00233         $uuid[<span class="stringliteral">&#39;clock_seq_low&#39;</span>] = mt_rand(0, 255);
<a name="l00234"></a>00234         <span class="keywordflow">for</span> ($i = 0; $i &lt; 6; $i++)
<a name="l00235"></a>00235             $uuid[<span class="stringliteral">&#39;node&#39;</span>][$i] = mt_rand(0, 255);
<a name="l00236"></a>00236         <span class="keywordflow">return</span> ($uuid);
<a name="l00237"></a>00237     }
<a name="l00238"></a>00238 
<a name="l00257"></a><a class="code" href="classUUID.html#aab3fedc0e55478bd8f64b96e08058d27">00257</a>     <span class="keyword">static</span> <span class="keyword">private</span> function <a class="code" href="classUUID.html#aab3fedc0e55478bd8f64b96e08058d27" title="Generate UUID version 3 and 5 (name based).">generateName</a>($ns, $node, $hash, $version) {
<a name="l00258"></a>00258         $ns_fmt = <a class="code" href="classUUID.html#a732429230a46ad2b47855d0ce35d591f" title="Auto-detect UUID format.">self::detectFormat</a>($ns);
<a name="l00259"></a>00259         $field = <a class="code" href="classUUID.html#a307f40cb92be97ac8183d9ab690c0783" title="Public API, convert a UUID from one format to another.">self::convert</a>($ns, $ns_fmt, self::FMT_FIELD);
<a name="l00260"></a>00260 
<a name="l00261"></a>00261         <span class="comment">/* Swap byte order to keep it in big endian on all platforms */</span>
<a name="l00262"></a>00262         $field[<span class="stringliteral">&#39;time_low&#39;</span>] = <a class="code" href="classUUID.html#aea78744f867c4950f15ec8bfd4b71c5b" title="Swap byte order of a 32-bit number.">self::swap32</a>($field[<span class="stringliteral">&#39;time_low&#39;</span>]);
<a name="l00263"></a>00263         $field[<span class="stringliteral">&#39;time_mid&#39;</span>] = <a class="code" href="classUUID.html#a27282c88cc7d2d64ee348aa31552347a" title="Swap byte order of a 16-bit number.">self::swap16</a>($field[<span class="stringliteral">&#39;time_mid&#39;</span>]);
<a name="l00264"></a>00264         $field[<span class="stringliteral">&#39;time_hi&#39;</span>] = <a class="code" href="classUUID.html#a27282c88cc7d2d64ee348aa31552347a" title="Swap byte order of a 16-bit number.">self::swap16</a>($field[<span class="stringliteral">&#39;time_hi&#39;</span>]);
<a name="l00265"></a>00265 
<a name="l00266"></a>00266         <span class="comment">/* Convert the namespace to binary and concatenate node */</span>
<a name="l00267"></a>00267         $raw = <a class="code" href="classUUID.html#a307f40cb92be97ac8183d9ab690c0783" title="Public API, convert a UUID from one format to another.">self::convert</a>($field, self::FMT_FIELD, self::FMT_BINARY);
<a name="l00268"></a>00268         $raw .= $node;
<a name="l00269"></a>00269 
<a name="l00270"></a>00270         <span class="comment">/* Hash the namespace and node and convert to a byte array */</span>
<a name="l00271"></a>00271         $val = $hash($raw, <span class="keyword">true</span>);    
<a name="l00272"></a>00272         $tmp = unpack(<span class="stringliteral">&#39;C16&#39;</span>, $val);
<a name="l00273"></a>00273         <span class="keywordflow">foreach</span> (array_keys($tmp) as $key)
<a name="l00274"></a>00274             $byte[$key - 1] = $tmp[$key];
<a name="l00275"></a>00275 
<a name="l00276"></a>00276         <span class="comment">/* Convert byte array to a field array */</span>
<a name="l00277"></a>00277         $field = <a class="code" href="classUUID.html#af3ed6ee51b6f33d9b688df91e507729f" title="Converts UUID from byte to field format.">self::conv_byte2field</a>($byte);
<a name="l00278"></a>00278 
<a name="l00279"></a>00279         $field[<span class="stringliteral">&#39;time_low&#39;</span>] = <a class="code" href="classUUID.html#aea78744f867c4950f15ec8bfd4b71c5b" title="Swap byte order of a 32-bit number.">self::swap32</a>($field[<span class="stringliteral">&#39;time_low&#39;</span>]);
<a name="l00280"></a>00280         $field[<span class="stringliteral">&#39;time_mid&#39;</span>] = <a class="code" href="classUUID.html#a27282c88cc7d2d64ee348aa31552347a" title="Swap byte order of a 16-bit number.">self::swap16</a>($field[<span class="stringliteral">&#39;time_mid&#39;</span>]);
<a name="l00281"></a>00281         $field[<span class="stringliteral">&#39;time_hi&#39;</span>] = <a class="code" href="classUUID.html#a27282c88cc7d2d64ee348aa31552347a" title="Swap byte order of a 16-bit number.">self::swap16</a>($field[<span class="stringliteral">&#39;time_hi&#39;</span>]);
<a name="l00282"></a>00282 
<a name="l00283"></a>00283         <span class="comment">/* Apply version and constants */</span>
<a name="l00284"></a>00284         $field[<span class="stringliteral">&#39;clock_seq_hi&#39;</span>] &amp;= 0x3f;
<a name="l00285"></a>00285         $field[<span class="stringliteral">&#39;clock_seq_hi&#39;</span>] |= (1 &lt;&lt; 7);
<a name="l00286"></a>00286         $field[<span class="stringliteral">&#39;time_hi&#39;</span>] &amp;= 0x0fff;
<a name="l00287"></a>00287         $field[<span class="stringliteral">&#39;time_hi&#39;</span>] |= ($version &lt;&lt; 12);
<a name="l00288"></a>00288 
<a name="l00289"></a>00289         <span class="keywordflow">return</span> ($field);    
<a name="l00290"></a>00290     }
<a name="l00291"></a>00291 
<a name="l00304"></a><a class="code" href="classUUID.html#aae0250c71a62dc886059a638c6d58f8a">00304</a>     <span class="keyword">static</span> <span class="keyword">private</span> function <a class="code" href="classUUID.html#aae0250c71a62dc886059a638c6d58f8a" title="Generate a named-based UUID using an MD5 hash.">generateNameMD5</a>($ns, $node) {
<a name="l00305"></a>00305         <span class="keywordflow">return</span> <a class="code" href="classUUID.html#aab3fedc0e55478bd8f64b96e08058d27" title="Generate UUID version 3 and 5 (name based).">self::generateName</a>($ns, $node, <span class="stringliteral">&quot;md5&quot;</span>,
<a name="l00306"></a>00306             self::UUID_NAME_MD5);
<a name="l00307"></a>00307     }
<a name="l00308"></a>00308 
<a name="l00321"></a><a class="code" href="classUUID.html#a5eed50462afc9ff6eebd909e69bddd3b">00321</a>     <span class="keyword">static</span> <span class="keyword">private</span> function <a class="code" href="classUUID.html#a5eed50462afc9ff6eebd909e69bddd3b" title="Generate a named-based UUID using an SHA1 hash.">generateNameSHA1</a>($ns, $node) {
<a name="l00322"></a>00322         <span class="keywordflow">return</span> <a class="code" href="classUUID.html#aab3fedc0e55478bd8f64b96e08058d27" title="Generate UUID version 3 and 5 (name based).">self::generateName</a>($ns, $node, <span class="stringliteral">&quot;sha1&quot;</span>,
<a name="l00323"></a>00323             self::UUID_NAME_SHA1);
<a name="l00324"></a>00324     }
<a name="l00325"></a>00325 
<a name="l00338"></a><a class="code" href="classUUID.html#ad77da967d7fcde16324cd8646dbdb3e0">00338</a>     <span class="keyword">static</span> <span class="keyword">private</span> function <a class="code" href="classUUID.html#ad77da967d7fcde16324cd8646dbdb3e0" title="Generate UUID version 1 (time based)">generateTime</a>($ns, $node) {
<a name="l00339"></a>00339         $uuid = <a class="code" href="classUUID.html#aa94cdfbceb065aa5e505ff5e3b31c2c3" title="Field UUID representation.">self::$m_uuid_field</a>;
<a name="l00340"></a>00340 
<a name="l00341"></a>00341         <span class="comment">/*</span>
<a name="l00342"></a>00342 <span class="comment">         * Get current time in 100 ns intervals. The magic value</span>
<a name="l00343"></a>00343 <span class="comment">         * is the offset between UNIX epoch and the UUID UTC</span>
<a name="l00344"></a>00344 <span class="comment">         * time base October 15, 1582.</span>
<a name="l00345"></a>00345 <span class="comment">         */</span>
<a name="l00346"></a>00346         $tp = gettimeofday();
<a name="l00347"></a>00347         $time = ($tp[<span class="stringliteral">&#39;sec&#39;</span>] * 10000000) + ($tp[<span class="stringliteral">&#39;usec&#39;</span>] * 10) +
<a name="l00348"></a>00348             0x01B21DD213814000;
<a name="l00349"></a>00349 
<a name="l00350"></a>00350         $uuid[<span class="stringliteral">&#39;time_low&#39;</span>] = $time &amp; 0xffffffff;
<a name="l00351"></a>00351         <span class="comment">/* Work around PHP 32-bit bit-operation limits */</span>
<a name="l00352"></a>00352         $high = intval($time / 0xffffffff);
<a name="l00353"></a>00353         $uuid[<span class="stringliteral">&#39;time_mid&#39;</span>] = $high &amp; 0xffff;
<a name="l00354"></a>00354         $uuid[<span class="stringliteral">&#39;time_hi&#39;</span>] = (($high &gt;&gt; 16) &amp; 0xfff) | (self::UUID_TIME &lt;&lt; 12);
<a name="l00355"></a>00355         
<a name="l00356"></a>00356         <span class="comment">/*</span>
<a name="l00357"></a>00357 <span class="comment">         * We don&#39;t support saved state information and generate</span>
<a name="l00358"></a>00358 <span class="comment">         * a random clock sequence each time.</span>
<a name="l00359"></a>00359 <span class="comment">         */</span>
<a name="l00360"></a>00360         $uuid[<span class="stringliteral">&#39;clock_seq_hi&#39;</span>] = 0x80 | mt_rand(0, 64);
<a name="l00361"></a>00361         $uuid[<span class="stringliteral">&#39;clock_seq_low&#39;</span>] = mt_rand(0, 255);
<a name="l00362"></a>00362 
<a name="l00363"></a>00363         <span class="comment">/*</span>
<a name="l00364"></a>00364 <span class="comment">         * Node should be set to the 48-bit IEEE node identifier, but</span>
<a name="l00365"></a>00365 <span class="comment">         * we leave it for the user to supply the node.</span>
<a name="l00366"></a>00366 <span class="comment">         */</span>
<a name="l00367"></a>00367         <span class="keywordflow">for</span> ($i = 0; $i &lt; 6; $i++)
<a name="l00368"></a>00368             $uuid[<span class="stringliteral">&#39;node&#39;</span>][$i] = ord(substr($node, $i, 1));
<a name="l00369"></a>00369 
<a name="l00370"></a>00370         <span class="keywordflow">return</span> ($uuid);
<a name="l00371"></a>00371     }
<a name="l00372"></a>00372 
<a name="l00382"></a><a class="code" href="classUUID.html#af37277f045b5df786d54aa5b41877f53">00382</a>     <span class="keyword">static</span> <span class="keyword">private</span> function <a class="code" href="classUUID.html#af37277f045b5df786d54aa5b41877f53" title="Converts UUID from field to byte format. Assumes correct byte order.">conv_field2byte</a>($src) {
<a name="l00383"></a>00383         $uuid[0] = ($src[<span class="stringliteral">&#39;time_low&#39;</span>] &amp; 0xff000000) &gt;&gt; 24;
<a name="l00384"></a>00384         $uuid[1] = ($src[<span class="stringliteral">&#39;time_low&#39;</span>] &amp; 0x00ff0000) &gt;&gt; 16;
<a name="l00385"></a>00385         $uuid[2] = ($src[<span class="stringliteral">&#39;time_low&#39;</span>] &amp; 0x0000ff00) &gt;&gt; 8;
<a name="l00386"></a>00386         $uuid[3] = ($src[<span class="stringliteral">&#39;time_low&#39;</span>] &amp; 0x000000ff);
<a name="l00387"></a>00387         $uuid[4] = ($src[<span class="stringliteral">&#39;time_mid&#39;</span>] &amp; 0xff00) &gt;&gt; 8;
<a name="l00388"></a>00388         $uuid[5] = ($src[<span class="stringliteral">&#39;time_mid&#39;</span>] &amp; 0x00ff);
<a name="l00389"></a>00389         $uuid[6] = ($src[<span class="stringliteral">&#39;time_hi&#39;</span>] &amp; 0xff00) &gt;&gt; 8;
<a name="l00390"></a>00390         $uuid[7] = ($src[<span class="stringliteral">&#39;time_hi&#39;</span>] &amp; 0x00ff);
<a name="l00391"></a>00391         $uuid[8] = $src[<span class="stringliteral">&#39;clock_seq_hi&#39;</span>];
<a name="l00392"></a>00392         $uuid[9] = $src[<span class="stringliteral">&#39;clock_seq_low&#39;</span>];
<a name="l00393"></a>00393 
<a name="l00394"></a>00394         <span class="keywordflow">for</span> ($i = 0; $i &lt; 6; $i++)
<a name="l00395"></a>00395             $uuid[10+$i] = $src[<span class="stringliteral">&#39;node&#39;</span>][$i];
<a name="l00396"></a>00396 
<a name="l00397"></a>00397         <span class="keywordflow">return</span> ($uuid);
<a name="l00398"></a>00398     }
<a name="l00399"></a>00399 
<a name="l00409"></a><a class="code" href="classUUID.html#a44b898f57370ec8088a8350b94a09018">00409</a>     <span class="keyword">static</span> <span class="keyword">private</span> function <a class="code" href="classUUID.html#a44b898f57370ec8088a8350b94a09018" title="Converts UUID from field to string format.">conv_field2string</a>($src) {
<a name="l00410"></a>00410         $str = sprintf(
<a name="l00411"></a>00411             <span class="stringliteral">&#39;%08x-%04x-%04x-%02x%02x-%02x%02x%02x%02x%02x%02x&#39;</span>,
<a name="l00412"></a>00412             ($src[<span class="stringliteral">&#39;time_low&#39;</span>]), ($src[<span class="stringliteral">&#39;time_mid&#39;</span>]), ($src[<span class="stringliteral">&#39;time_hi&#39;</span>]),
<a name="l00413"></a>00413             $src[<span class="stringliteral">&#39;clock_seq_hi&#39;</span>], $src[<span class="stringliteral">&#39;clock_seq_low&#39;</span>],
<a name="l00414"></a>00414             $src[<span class="stringliteral">&#39;node&#39;</span>][0], $src[<span class="stringliteral">&#39;node&#39;</span>][1], $src[<span class="stringliteral">&#39;node&#39;</span>][2],
<a name="l00415"></a>00415             $src[<span class="stringliteral">&#39;node&#39;</span>][3], $src[<span class="stringliteral">&#39;node&#39;</span>][4], $src[<span class="stringliteral">&#39;node&#39;</span>][5]);
<a name="l00416"></a>00416         <span class="keywordflow">return</span> ($str);
<a name="l00417"></a>00417     }
<a name="l00418"></a>00418 
<a name="l00428"></a><a class="code" href="classUUID.html#a616f7f524b3883bd6cfbb3cda33f419f">00428</a>     <span class="keyword">static</span> <span class="keyword">private</span> function <a class="code" href="classUUID.html#a616f7f524b3883bd6cfbb3cda33f419f" title="Converts UUID from field to binary format.">conv_field2binary</a>($src) {
<a name="l00429"></a>00429         $byte = <a class="code" href="classUUID.html#af37277f045b5df786d54aa5b41877f53" title="Converts UUID from field to byte format. Assumes correct byte order.">self::conv_field2byte</a>($src);
<a name="l00430"></a>00430         <span class="keywordflow">return</span> <a class="code" href="classUUID.html#ab9f7a8fecbcccbc2c7aca977a869e362" title="Converts UUID from byte to binary format.">self::conv_byte2binary</a>($byte);
<a name="l00431"></a>00431     }
<a name="l00432"></a>00432 
<a name="l00442"></a><a class="code" href="classUUID.html#af3ed6ee51b6f33d9b688df91e507729f">00442</a>     <span class="keyword">static</span> <span class="keyword">private</span> function <a class="code" href="classUUID.html#af3ed6ee51b6f33d9b688df91e507729f" title="Converts UUID from byte to field format.">conv_byte2field</a>($uuid) {
<a name="l00443"></a>00443         $field = <a class="code" href="classUUID.html#aa94cdfbceb065aa5e505ff5e3b31c2c3" title="Field UUID representation.">self::$m_uuid_field</a>;
<a name="l00444"></a>00444         $field[<span class="stringliteral">&#39;time_low&#39;</span>] = ($uuid[0] &lt;&lt; 24) | ($uuid[1] &lt;&lt; 16) |
<a name="l00445"></a>00445             ($uuid[2] &lt;&lt; 8) | $uuid[3];
<a name="l00446"></a>00446         $field[<span class="stringliteral">&#39;time_mid&#39;</span>] = ($uuid[4] &lt;&lt; 8) | $uuid[5];
<a name="l00447"></a>00447         $field[<span class="stringliteral">&#39;time_hi&#39;</span>] = ($uuid[6] &lt;&lt; 8) | $uuid[7];
<a name="l00448"></a>00448         $field[<span class="stringliteral">&#39;clock_seq_hi&#39;</span>] = $uuid[8];
<a name="l00449"></a>00449         $field[<span class="stringliteral">&#39;clock_seq_low&#39;</span>] = $uuid[9];
<a name="l00450"></a>00450 
<a name="l00451"></a>00451         <span class="keywordflow">for</span> ($i = 0; $i &lt; 6; $i++)
<a name="l00452"></a>00452             $field[<span class="stringliteral">&#39;node&#39;</span>][$i] = $uuid[10+$i];
<a name="l00453"></a>00453         <span class="keywordflow">return</span> ($field);
<a name="l00454"></a>00454     }
<a name="l00455"></a>00455 
<a name="l00465"></a><a class="code" href="classUUID.html#ab55d4561421fd2385a0e636bcd69edb2">00465</a>     <span class="keyword">static</span> <span class="keyword">public</span> function <a class="code" href="classUUID.html#ab55d4561421fd2385a0e636bcd69edb2" title="Converts UUID form byte to string format.">conv_byte2string</a>($src) {
<a name="l00466"></a>00466         $field = <a class="code" href="classUUID.html#af3ed6ee51b6f33d9b688df91e507729f" title="Converts UUID from byte to field format.">self::conv_byte2field</a>($src);
<a name="l00467"></a>00467         <span class="keywordflow">return</span> <a class="code" href="classUUID.html#a44b898f57370ec8088a8350b94a09018" title="Converts UUID from field to string format.">self::conv_field2string</a>($field);
<a name="l00468"></a>00468     }
<a name="l00469"></a>00469 
<a name="l00479"></a><a class="code" href="classUUID.html#ab9f7a8fecbcccbc2c7aca977a869e362">00479</a>     <span class="keyword">static</span> <span class="keyword">private</span> function <a class="code" href="classUUID.html#ab9f7a8fecbcccbc2c7aca977a869e362" title="Converts UUID from byte to binary format.">conv_byte2binary</a>($src) {
<a name="l00480"></a>00480         $raw = pack(<span class="stringliteral">&#39;C16&#39;</span>, $src[0], $src[1], $src[2], $src[3],
<a name="l00481"></a>00481             $src[4], $src[5], $src[6], $src[7], $src[8], $src[9],
<a name="l00482"></a>00482             $src[10], $src[11], $src[12], $src[13], $src[14], $src[15]);
<a name="l00483"></a>00483         <span class="keywordflow">return</span> ($raw);
<a name="l00484"></a>00484     }
<a name="l00485"></a>00485 
<a name="l00495"></a><a class="code" href="classUUID.html#ace38736fc6e76af612548ca923fb7865">00495</a>     <span class="keyword">static</span> <span class="keyword">private</span> function <a class="code" href="classUUID.html#ace38736fc6e76af612548ca923fb7865" title="Converts UUID from string to field format.">conv_string2field</a>($src) {
<a name="l00496"></a>00496         $parts = sscanf($src, <span class="stringliteral">&#39;%x-%x-%x-%x-%02x%02x%02x%02x%02x%02x&#39;</span>);
<a name="l00497"></a>00497         $field = <a class="code" href="classUUID.html#aa94cdfbceb065aa5e505ff5e3b31c2c3" title="Field UUID representation.">self::$m_uuid_field</a>;
<a name="l00498"></a>00498         $field[<span class="stringliteral">&#39;time_low&#39;</span>] = ($parts[0]);
<a name="l00499"></a>00499         $field[<span class="stringliteral">&#39;time_mid&#39;</span>] = ($parts[1]);
<a name="l00500"></a>00500         $field[<span class="stringliteral">&#39;time_hi&#39;</span>] = ($parts[2]);
<a name="l00501"></a>00501         $field[<span class="stringliteral">&#39;clock_seq_hi&#39;</span>] = ($parts[3] &amp; 0xff00) &gt;&gt; 8;
<a name="l00502"></a>00502         $field[<span class="stringliteral">&#39;clock_seq_low&#39;</span>] = $parts[3] &amp; 0x00ff;
<a name="l00503"></a>00503         <span class="keywordflow">for</span> ($i = 0; $i &lt; 6; $i++)
<a name="l00504"></a>00504             $field[<span class="stringliteral">&#39;node&#39;</span>][$i] = $parts[4+$i];
<a name="l00505"></a>00505 
<a name="l00506"></a>00506         <span class="keywordflow">return</span> ($field);
<a name="l00507"></a>00507     }
<a name="l00508"></a>00508 
<a name="l00518"></a><a class="code" href="classUUID.html#a4662c36c588600a49b02754f25e68d41">00518</a>     <span class="keyword">static</span> <span class="keyword">private</span> function <a class="code" href="classUUID.html#a4662c36c588600a49b02754f25e68d41" title="Converts UUID from string to byte format.">conv_string2byte</a>($src) {
<a name="l00519"></a>00519         $field = <a class="code" href="classUUID.html#ace38736fc6e76af612548ca923fb7865" title="Converts UUID from string to field format.">self::conv_string2field</a>($src);
<a name="l00520"></a>00520         <span class="keywordflow">return</span> <a class="code" href="classUUID.html#af37277f045b5df786d54aa5b41877f53" title="Converts UUID from field to byte format. Assumes correct byte order.">self::conv_field2byte</a>($field);
<a name="l00521"></a>00521     }
<a name="l00522"></a>00522 
<a name="l00532"></a><a class="code" href="classUUID.html#a48e6c88ecbd407fdd96533f9a83d8404">00532</a>     <span class="keyword">static</span> <span class="keyword">private</span> function <a class="code" href="classUUID.html#a48e6c88ecbd407fdd96533f9a83d8404" title="Converts UUID form string to binary format.">conv_string2binary</a>($src) {
<a name="l00533"></a>00533         $byte = <a class="code" href="classUUID.html#a4662c36c588600a49b02754f25e68d41" title="Converts UUID from string to byte format.">self::conv_string2byte</a>($src);
<a name="l00534"></a>00534         <span class="keywordflow">return</span> <a class="code" href="classUUID.html#ab9f7a8fecbcccbc2c7aca977a869e362" title="Converts UUID from byte to binary format.">self::conv_byte2binary</a>($byte);
<a name="l00535"></a>00535     }
<a name="l00536"></a>00536 }
<a name="l00537"></a>00537 
<a name="l00538"></a>00538 ?&gt;
</pre></div></div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Tue Apr 23 2013 for MyExperiment RDF by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
