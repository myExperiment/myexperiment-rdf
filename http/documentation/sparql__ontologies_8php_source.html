<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MyExperiment RDF: http/sparql_ontologies.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MyExperiment RDF&#160;<span id="projectnumber">beta</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>http/sparql_ontologies.php</h1>  </div>
</div>
<div class="contents">
<a href="sparql__ontologies_8php.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00010"></a>00010 <a class="code" href="current__spec_8php.html#af2582e2f620e4157097929da5cc0ed18" title="The page title to be displayed in an h1 tag and the title of the html header.">$pagetitle</a>=<span class="stringliteral">&quot;Ontologies SPARQL Endpoint&quot;</span>;
<a name="l00011"></a>00011 $htmlheader[]=<span class="stringliteral">&#39;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;/css/style.css&quot;/&gt;&#39;</span>;
<a name="l00012"></a>00012 $htmlheader[]=<span class="stringliteral">&#39;&lt;script src=&quot;/js/sparql.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;&#39;</span>;
<a name="l00013"></a>00013 $htmlheader[]=<span class="stringliteral">&#39;&lt;script src=&quot;/js/codemirror.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;&#39;</span>;
<a name="l00014"></a>00014 include(<span class="stringliteral">&#39;include.inc.php&#39;</span>);
<a name="l00015"></a>00015 include(<span class="stringliteral">&#39;functions/xml.inc.php&#39;</span>);
<a name="l00016"></a>00016 include(<span class="stringliteral">&#39;connect/ontologies.inc.php&#39;</span>);
<a name="l00017"></a>00017 require(<span class="stringliteral">&#39;funtions/4store.inc.php&#39;</span>);
<a name="l00018"></a>00018 require(<span class="stringliteral">&#39;functions/utility.inc.php&#39;</span>);
<a name="l00019"></a>00019 $notriples=<a class="code" href="4store_8inc_8php.html#a4ac3ef7ed6a836b846c0f3bcd245a41c" title="Determine the number of triples in a specified knowledge base.">getNoTriples</a>(<a class="code" href="defaultsettings_8inc_8php.html#a4841501b2110b100d640c4671140fa9b" title="A string specifying the name of the ontologies knowledge base.">$onto_kb</a>);
<a name="l00020"></a>00020 $prefix=<span class="stringliteral">&quot;&quot;</span>;
<a name="l00021"></a>00021 $lmdate=date(<span class="charliteral">&#39;r&#39;</span>,strtotime(date(<span class="stringliteral">&#39;Y-m-d&#39;</span>,<a class="code" href="4store_8inc_8php.html#a1522c08922617ffe497b3cb4fa1c3445" title="Get the last time a specified knowledge base was updated.">getLastUpdated</a>(<a class="code" href="defaultsettings_8inc_8php.html#a4841501b2110b100d640c4671140fa9b" title="A string specifying the name of the ontologies knowledge base.">$onto_kb</a>)))-60);
<a name="l00022"></a>00022 $softlimit=1;
<a name="l00023"></a>00023 $reasoning=0;
<a name="l00024"></a>00024 $maxsoftlimit=100;
<a name="l00025"></a>00025 $formatting=<span class="stringliteral">&quot;XML&quot;</span>;
<a name="l00026"></a>00026 $mimetype=<span class="stringliteral">&quot;application/xml&quot;</span>;
<a name="l00027"></a>00027 $format=<span class="stringliteral">&quot;sparql&quot;</span>;
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 $formats=array(<span class="stringliteral">&quot;HTML Table&quot;</span>=&gt;array(<span class="stringliteral">&quot;sparql&quot;</span>,array(<span class="stringliteral">&quot;text/html&quot;</span>,<span class="stringliteral">&quot;application/xhtml+xml&quot;</span>)), <span class="stringliteral">&quot;XML&quot;</span>=&gt;array(<span class="stringliteral">&quot;sparql&quot;</span>,array(<span class="stringliteral">&quot;application/xml&quot;</span>,<span class="stringliteral">&quot;applications/sparql-results+xml&quot;</span>)),<span class="stringliteral">&quot;Text&quot;</span>=&gt;array(<span class="stringliteral">&quot;text&quot;</span>,array(<span class="stringliteral">&quot;text/plain&quot;</span>)),<span class="stringliteral">&quot;JSON&quot;</span>=&gt;array(<span class="stringliteral">&quot;json&quot;</span>,array(<span class="stringliteral">&quot;application/json&quot;</span>)),<span class="stringliteral">&quot;CSV&quot;</span>=&gt;array(<span class="stringliteral">&quot;sparql&quot;</span>,array(<span class="stringliteral">&quot;text/csv&quot;</span>,<span class="stringliteral">&quot;application/csv&quot;</span>)),<span class="stringliteral">&quot;CSV Matrix&quot;</span>=&gt;array(<span class="stringliteral">&quot;sparql&quot;</span>,array(<span class="stringliteral">&quot;text/csv&quot;</span>,<span class="stringliteral">&quot;application/csv&quot;</span>)));
<a name="l00030"></a>00030 <span class="keywordflow">if</span> (isset($_POST[<span class="stringliteral">&#39;formatting&#39;</span>])) $formatting=$_POST[<span class="stringliteral">&#39;formatting&#39;</span>];
<a name="l00031"></a>00031 elseif (isset($_GET[<span class="stringliteral">&#39;formatting&#39;</span>]) &amp;&amp; strlen($_GET[<span class="stringliteral">&#39;formatting&#39;</span>])&gt;0) $formatting=$_GET[&#39;formatting&#39;];
<a name="l00032"></a>00032 else{
<a name="l00033"></a>00033         $mtfound=0;
<a name="l00034"></a>00034         $fc_mimetype=<a class="code" href="utility_8inc_8php.html#aaa2ce988d3e9855e0d21dc918406997b" title="Determine what is the first choice MIME type from the accept string provided.">get_first_choice_mimetype</a>($_SERVER[<span class="stringliteral">&#39;HTTP_ACCEPT&#39;</span>]);
<a name="l00035"></a>00035         <span class="keywordflow">foreach</span> ($formats as $fname =&gt; $aformat){
<a name="l00036"></a>00036                 <span class="keywordflow">foreach</span> ($aformat[1] as $amimetype){
<a name="l00037"></a>00037                         <span class="keywordflow">if</span> ($fc_mimetype==$amimetype){
<a name="l00038"></a>00038                                 $formatting=$fname;
<a name="l00039"></a>00039                                 $mtfound=1;
<a name="l00040"></a>00040                                 <span class="keywordflow">break</span>;
<a name="l00041"></a>00041                         }
<a name="l00042"></a>00042                 }
<a name="l00043"></a>00043                 <span class="keywordflow">if</span> ($mtfound) <span class="keywordflow">break</span>;
<a name="l00044"></a>00044         }
<a name="l00045"></a>00045 }
<a name="l00046"></a>00046 <span class="keywordflow">if</span> ($formatting!=<span class="stringliteral">&quot;XML&quot;</span>){
<a name="l00047"></a>00047         $format=$formats[$formatting][0];
<a name="l00048"></a>00048         $mimetype=$formats[$formatting][1][0];
<a name="l00049"></a>00049 }
<a name="l00050"></a>00050 $clientlive=<span class="keyword">true</span>;
<a name="l00051"></a>00051 <span class="keywordflow">if</span> (isset($_POST[<span class="stringliteral">&#39;generate_service&#39;</span>])){
<a name="l00052"></a>00052         <span class="keywordflow">if</span> (isset($_POST[<span class="stringliteral">&#39;query&#39;</span>]) and strlen($_POST[<span class="stringliteral">&#39;query&#39;</span>])&gt;0){
<a name="l00053"></a>00053                 <a class="code" href="current__spec_8php.html#af2582e2f620e4157097929da5cc0ed18" title="The page title to be displayed in an h1 tag and the title of the html header.">$pagetitle</a>=<span class="stringliteral">&quot;Ontologies PARQL Query Service&quot;</span>;
<a name="l00054"></a>00054                 include(<span class="stringliteral">&#39;header.inc.php&#39;</span>);
<a name="l00055"></a>00055                 <span class="keywordflow">if</span> (strlen($formatting)&gt;0 &amp;&amp; $formatting!=<span class="stringliteral">&quot;HTML Table&quot;</span>) $formatparam=<span class="stringliteral">&quot;&amp;formatting=&quot;</span>.$formatting;
<a name="l00056"></a>00056                 <span class="keywordflow">if</span> ($_POST[<span class="stringliteral">&#39;softlimit&#39;</span>]&gt;1) $softlimitparam=<span class="stringliteral">&quot;&amp;amp;softlimit=$_POST[softlimit]&quot;</span>;
<a name="l00057"></a>00057                 <span class="keywordflow">if</span> (isset($_POST[<span class="stringliteral">&#39;reasoning&#39;</span>])) $reasoningparam=<span class="stringliteral">&quot;&amp;amp;reasoning=$_POST[reasoning]&quot;</span>;
<a name="l00058"></a>00058                 $query=urlencode(<a class="code" href="4store_8inc_8php.html#a9890d576ba581310e2e8ffd2348cb4de" title="Pre-process a query to escape quote marks and add PREFIX statements for known namespaces whoese prefi...">preProcessQuery</a>($_POST[<span class="stringliteral">&#39;query&#39;</span>]));
<a name="l00059"></a>00059                 $service_url=<span class="stringliteral">&quot;http://&quot;</span>.$_SERVER[<span class="stringliteral">&#39;SERVER_NAME&#39;</span>].<span class="stringliteral">&quot;/sparql?query=$query$formatparam$softlimitparam$reasoningparam&quot;</span>;
<a name="l00060"></a>00060                 echo <span class="stringliteral">&quot;&lt;p&gt;Below is a URL which you can use give to any application capable of making HTTP requests and it will return you the current results for the query you made.&lt;/p&gt;&quot;</span>;
<a name="l00061"></a>00061                 <span class="keywordflow">if</span> ($formatting==<span class="stringliteral">&quot;HTML Table&quot;</span>){
<a name="l00062"></a>00062                         echo <span class="stringliteral">&quot;&lt;div class=\&quot;red\&quot;&gt;&lt;b&gt;WARNING:&lt;/b&gt; This service require the HTTP request to explictly specify its accept type in the request header.  if this is not set appropriately the format returned will most likely be HTML with an embedded table of results. To select a particular format, click back and select it from the list provided before clicking &amp;quot;Generate Service for Query&amp;quot; again.&lt;/div&gt;&lt;br/&gt;\n&quot;</span>;
<a name="l00063"></a>00063                 }
<a name="l00064"></a>00064                 echo <span class="stringliteral">&quot;&lt;p style=\&quot;margin: 0 30px\&quot;&gt;&lt;a href=\&quot;$service_url\&quot;&gt;$service_url&lt;/a&gt;&lt;/p&gt;&quot;</span>;
<a name="l00065"></a>00065                 include(<span class="stringliteral">&#39;footer.inc.php&#39;</span>);
<a name="l00066"></a>00066                exit(1);
<a name="l00067"></a>00067         }
<a name="l00068"></a>00068         <span class="keywordflow">else</span>{
<a name="l00069"></a>00069                 $err=<span class="stringliteral">&quot;No query was submitted&quot;</span>;
<a name="l00070"></a>00070         }
<a name="l00071"></a>00071 }
<a name="l00072"></a>00072 <span class="keywordflow">if</span> (!$clientlive) $err=<span class="stringliteral">&quot;This Ontologies SPARQL Endpoint is currently unavailable&quot;</span>;
<a name="l00073"></a>00073 <span class="keywordflow">else</span>{
<a name="l00074"></a>00074         <span class="keywordflow">if</span> ($_POST){
<a name="l00075"></a>00075                 $query = $_POST[<span class="stringliteral">&#39;query&#39;</span>];
<a name="l00076"></a>00076                 <span class="keywordflow">if</span> (is_int(intval($_POST[<span class="stringliteral">&#39;softlimit&#39;</span>])) &amp;&amp; intval($_POST[<span class="stringliteral">&#39;softlimit&#39;</span>])&gt;0 &amp;&amp; intval($_POST[<span class="stringliteral">&#39;softlimit&#39;</span>])&lt;=$maxsoftlimit) $softlimit=intval($_POST[<span class="stringliteral">&#39;softlimit&#39;</span>]); 
<a name="l00077"></a>00077                 <span class="keywordflow">if</span> (isset($_POST[<span class="stringliteral">&#39;reasoning&#39;</span>]) &amp;&amp; strlen($_POST[<span class="stringliteral">&#39;reasoning&#39;</span>])&gt;0) $reasoning=1;
<a name="l00078"></a>00078         }
<a name="l00079"></a>00079         elseif ($_GET){         
<a name="l00080"></a>00080                 $query = rawurldecode($_GET[<span class="stringliteral">&#39;query&#39;</span>]);
<a name="l00081"></a>00081                 <span class="keywordflow">if</span> (is_int(intval($_GET[<span class="stringliteral">&#39;softlimit&#39;</span>])) &amp;&amp; intval($_GET[<span class="stringliteral">&#39;softlimit&#39;</span>])&gt;0 &amp;&amp; intval($_GET[<span class="stringliteral">&#39;softlimit&#39;</span>])&lt;=$maxsoftlimit) $softlimit=intval($_GET[<span class="stringliteral">&#39;softlimit&#39;</span>]);
<a name="l00082"></a>00082                 <span class="keywordflow">if</span> (isset($_GET[<span class="stringliteral">&#39;reasoning&#39;</span>]) &amp;&amp; strlen($_GET[<span class="stringliteral">&#39;reasoning&#39;</span>])&gt;0) $reasoning=1;
<a name="l00083"></a>00083         }
<a name="l00084"></a>00084         <span class="keywordflow">if</span> ($query) {   
<a name="l00085"></a>00085                 $query=<a class="code" href="4store_8inc_8php.html#a9890d576ba581310e2e8ffd2348cb4de" title="Pre-process a query to escape quote marks and add PREFIX statements for known namespaces whoese prefi...">preProcessQuery</a>($query);
<a name="l00086"></a>00086                 $results=<a class="code" href="4store_8inc_8php.html#a7dcc81b7461baf7573ce5f911c6fd0a7" title="Send a SPARQL query (and retrieve results) to a specified knowledge base. (This will be refactored wh...">sparqlQueryClient</a>(<a class="code" href="defaultsettings_8inc_8php.html#a4841501b2110b100d640c4671140fa9b" title="A string specifying the name of the ontologies knowledge base.">$onto_kb</a>,$query,$format,$softlimit*10000,$reasoning);
<a name="l00087"></a>00087                 $err=implode(<span class="stringliteral">&#39;&lt;br/&gt;&#39;</span>,<a class="code" href="current__spec_8php.html#a23a63d874e5f032bcc7c4cad73a5f623" title="Array to store error messages from failed SPARQL queries.">$errs</a>);
<a name="l00088"></a>00088         }
<a name="l00089"></a>00089 }
<a name="l00090"></a>00090 <span class="keywordflow">if</span> ($formatting!=<span class="stringliteral">&quot;HTML Table&quot;</span>){
<a name="l00091"></a>00091         $done=1;
<a name="l00092"></a>00092         <span class="keywordflow">if</span> ($formatting==<span class="stringliteral">&quot;CSV&quot;</span>) $results=<a class="code" href="xml_8inc_8php.html#a572e21d510b70ba812089bbc17d31575" title="Convert a tabular representation of SPARQL results into a CSV representation.">convertTableToCSV</a>(tabulateSPARQLResults(<a class="code" href="xml_8inc_8php.html#a4e5d902d21dad2c18a8a57ab2b530fb0" title="Parses and XML string an returns an array-based representation of the XML. (Reverse of generateXML fu...">parseXML</a>($results)));
<a name="l00093"></a>00093         elseif ($formatting==<span class="stringliteral">&quot;CSV Matrix&quot;</span>){
<a name="l00094"></a>00094                 $csvmatrix=<a class="code" href="xml_8inc_8php.html#a6853356dc0a2d99868dad7766635e3b2" title="Convert a tabular representation of SPARQL results into a two dimensional CSV matrix representation...">convertTableToCSVMatrix</a>(tabulateSPARQLResults(<a class="code" href="xml_8inc_8php.html#a4e5d902d21dad2c18a8a57ab2b530fb0" title="Parses and XML string an returns an array-based representation of the XML. (Reverse of generateXML fu...">parseXML</a>($results)));
<a name="l00095"></a>00095                 <span class="keywordflow">if</span> ($err){
<a name="l00096"></a>00096                         $results=null;
<a name="l00097"></a>00097                         $done=0;
<a name="l00098"></a>00098                 }
<a name="l00099"></a>00099                 elseif (substr($csvmatrix,0,5)==<span class="stringliteral">&quot;ERROR&quot;</span>){
<a name="l00100"></a>00100                         $err=$csvmatrix;
<a name="l00101"></a>00101                         $results=null;
<a name="l00102"></a>00102                         $done=0;
<a name="l00103"></a>00103                 }
<a name="l00104"></a>00104                 <span class="keywordflow">else</span>{
<a name="l00105"></a>00105                         $results=$csvmatrix;
<a name="l00106"></a>00106                 }
<a name="l00107"></a>00107         }
<a name="l00108"></a>00108         <span class="keywordflow">if</span> ($done){
<a name="l00109"></a>00109                 header(<span class="stringliteral">&quot;Content-type: $mimetype&quot;</span>);
<a name="l00110"></a>00110                 echo $results;
<a name="l00111"></a>00111         }
<a name="l00112"></a>00112 }
<a name="l00113"></a>00113 <span class="keywordflow">if</span>($clientlive &amp;&amp; !$done){
<a name="l00114"></a>00114         include(<span class="stringliteral">&#39;header.inc.php&#39;</span>);
<a name="l00115"></a>00115 ?&gt;
<a name="l00116"></a>00116     &lt;div align=<span class="stringliteral">&quot;center&quot;</span>&gt; 
<a name="l00117"></a>00117     &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;purple&quot;</span>&gt;
<a name="l00118"></a>00118       &lt;div style=<span class="stringliteral">&quot;float: left; width: 10%;&quot;</span>&gt;&amp;nbsp;&lt;/div&gt;
<a name="l00119"></a>00119       &lt;h3 style=<span class="stringliteral">&quot;float: left; width: 80%; text-align: center; margin: 0;&quot;</span>&gt;Useful Prefixes&lt;/h3&gt;
<a name="l00120"></a>00120       &lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;prefixes_show&quot;</span> onclick=<span class="stringliteral">&quot;showPrefixes();&quot;</span> style=<span class="stringliteral">&quot;float: right; text-align: right; width: 10%; display: none;&quot;</span>&gt;[&lt;span <span class="keyword">class</span>=<span class="stringliteral">&quot;link&quot;</span> style=<span class="stringliteral">&quot;font-size: 1em;&quot;</span>&gt;Show&lt;/span&gt;]&lt;/div&gt;&lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;prefixes_hide&quot;</span> onclick=<span class="stringliteral">&quot;hidePrefixes();&quot;</span> style=<span class="stringliteral">&quot;float: right; text-align: right; width: 10%;&quot;</span>&gt;[&lt;span <span class="keyword">class</span>=<span class="stringliteral">&quot;link&quot;</span> style=<span class="stringliteral">&quot;font-size: 1em;&quot;</span>&gt;Hide&lt;/span&gt;]&lt;/div&gt;
<a name="l00121"></a>00121 
<a name="l00122"></a>00122       &lt;div style=<span class="stringliteral">&quot;clear: both;&quot;</span>&gt;&lt;/div&gt;
<a name="l00123"></a>00123       &lt;div <span class="keywordtype">id</span>=<span class="stringliteral">&quot;prefixes&quot;</span> style=<span class="stringliteral">&quot;font-size: 0.8em;&quot;</span>&gt;&lt;?=<a class="code" href="utility_8inc_8php.html#a1b89625a6a11d20ba7edcfe554c2b649" title="Generates HTML table of useful prefixes and their namespaces. For use a the top of a SPARQL endpoint ...">getUsefulPrefixes</a>(<span class="stringliteral">&quot;&quot;</span>)?&gt;&lt;/div&gt;
<a name="l00124"></a>00124     &lt;/div&gt;
<a name="l00125"></a>00125     &lt;br/&gt;
<a name="l00126"></a>00126     &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;yellow&quot;</span>&gt;
<a name="l00127"></a>00127       &lt;h3 style=<span class="stringliteral">&quot;text-align: center; margin: 0; margin-bottom: 10px;&quot;</span>&gt;Querying&lt;/h3&gt;
<a name="l00128"></a>00128       &lt;p style=<span class="stringliteral">&quot;text-align: right; position: relative; top: -38px;&quot;</span>&gt;&lt;small&gt;&lt;a href=<span class="stringliteral">&quot;/howtosparql&quot;</span> title=<span class="stringliteral">&quot;How to SPARQL in myExperiment Guide&quot;</span>&gt;Need help querying myExperiment RDF?&lt;br/&gt;New to SPARQL?&lt;/a&gt;&lt;/small&gt;&lt;/p&gt;
<a name="l00129"></a>00129       &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;green&quot;</span> style=<span class="stringliteral">&quot;position: relative; top: -28px; font-size: 0.9em;&quot;</span>&gt;This SPARQL Endpoint nows supports query time RDFS reasoning <span class="keyword">using</span> &lt;a href=<span class="stringliteral">&quot;http://4sreasoner.ecs.soton.ac.uk/&quot;</span>&gt;4Store Reasoner&lt;/a&gt;.  Click &lt;a href=<span class="stringliteral">&quot;howtosparql?page=Using the SPARQL Endpoint#Reasoning&quot;</span>&gt;here&lt;/a&gt; <span class="keywordflow">for</span> more details.&lt;/div&gt;
<a name="l00130"></a>00130     &lt;form name=<span class="stringliteral">&quot;queryform&quot;</span> method=<span class="stringliteral">&quot;post&quot;</span> action=<span class="stringliteral">&quot;&quot;</span>&gt;
<a name="l00131"></a>00131        &lt;p style=<span class="stringliteral">&quot;padding: 10px 70px; margin-top: -30px;&quot;</span>&gt;&lt;small&gt;From time to time modifications are made to the &lt;a href=<span class="stringliteral">&quot;/ontologies/&quot;</span>&gt;myExperiment Ontology&lt;/a&gt; and therefore the RDF queried by <span class="keyword">this</span> SPARQL endpoint.  Please check the &lt;a href=<span class="stringliteral">&quot;/ontologies/CHANGELOG&quot;</span>&gt;CHANGELOG&lt;/a&gt; and/or the &lt;a href=<span class="stringliteral">&quot;/ontologies/specification&quot;</span>&gt;Ontology specification&lt;/a&gt; <span class="keywordflow">if</span> your query has ceased to function.&lt;/p&gt;
<a name="l00132"></a>00132        &lt;table style=<span class="stringliteral">&quot;font-size: 10pt;&quot;</span>&gt;
<a name="l00133"></a>00133           &lt;tr&gt;
<a name="l00134"></a>00134             &lt;th style=<span class="stringliteral">&quot;text-align: right;&quot;</span>&gt;Version Info:&lt;/th&gt;
<a name="l00135"></a>00135             &lt;td style=<span class="stringliteral">&quot;text-align: left;&quot;</span>&gt;&lt;?= <a class="code" href="4store_8inc_8php.html#a1c6295221824f7355b3f86eee04676c2" title="Get the versions of 4Store, RAPTOR and RASQAL that are being used by knowledge bases / SPARQL endpoin...">get4StoreVersions</a>() ?&gt;&lt;/td&gt;
<a name="l00136"></a>00136           &lt;/tr&gt;
<a name="l00137"></a>00137           &lt;tr&gt;
<a name="l00138"></a>00138             &lt;th style=<span class="stringliteral">&quot;text-align: right;&quot;</span>&gt;No. of Triples:&lt;/th&gt;
<a name="l00139"></a>00139             &lt;td style=<span class="stringliteral">&quot;text-align: left;&quot;</span>&gt;&lt;?= $notriples ?&gt;&lt;/td&gt;
<a name="l00140"></a>00140           &lt;/tr&gt;
<a name="l00141"></a>00141           &lt;tr&gt;
<a name="l00142"></a>00142             &lt;th style=<span class="stringliteral">&quot;text-align: right;&quot;</span>&gt;Last Snapshot Taken At:&lt;/th&gt;
<a name="l00143"></a>00143             &lt;td style=<span class="stringliteral">&quot;text-align: left;&quot;</span>&gt;&lt;?= $lmdate ?&gt;&lt;/td&gt;
<a name="l00144"></a>00144           &lt;/tr&gt;
<a name="l00145"></a>00145           &lt;tr&gt;
<a name="l00146"></a>00146             &lt;th style=<span class="stringliteral">&quot;text-align: right;&quot;</span>&gt;Format:&lt;/th&gt;
<a name="l00147"></a>00147             &lt;td style=<span class="stringliteral">&quot;text-align: left;&quot;</span>&gt;
<a name="l00148"></a>00148               &lt;select name=<span class="stringliteral">&quot;formatting&quot;</span>&gt;
<a name="l00149"></a>00149           &lt;?php
<a name="l00150"></a>00150         $formattings=array_keys($formats);
<a name="l00151"></a>00151         <span class="keywordflow">for</span> ($f=0; $f&lt;<span class="keyword">sizeof</span>($formattings); $f++){
<a name="l00152"></a>00152                 echo <span class="stringliteral">&quot;            &lt;option &quot;</span>;
<a name="l00153"></a>00153                 <span class="keywordflow">if</span> ($formattings[$f]==$formatting) echo <span class="stringliteral">&#39;selected=&quot;selected&quot; &#39;</span>;
<a name="l00154"></a>00154                 echo <span class="stringliteral">&quot;value=\&quot;&quot;</span>.$formattings[$f].<span class="stringliteral">&quot;\&quot;&gt;&quot;</span>.$formattings[$f].<span class="stringliteral">&quot;&lt;/option&gt;\n&quot;</span>;
<a name="l00155"></a>00155         }
<a name="l00156"></a>00156 ?&gt;
<a name="l00157"></a>00157               &lt;/select&gt;
<a name="l00158"></a>00158            &lt;/td&gt;
<a name="l00159"></a>00159         &lt;/tr&gt;
<a name="l00160"></a>00160         &lt;tr&gt;
<a name="l00161"></a>00161           &lt;th style=<span class="stringliteral">&quot;text-align: right;&quot;</span>&gt;Soft Limit:&lt;/th&gt;
<a name="l00162"></a>00162           &lt;td style=<span class="stringliteral">&quot;text-align: left;&quot;</span>&gt;&lt;input type=<span class="stringliteral">&quot;text&quot;</span> size=<span class="stringliteral">&quot;3&quot;</span> maxlength=<span class="stringliteral">&quot;3&quot;</span> name=<span class="stringliteral">&quot;softlimit&quot;</span> value=<span class="stringliteral">&quot;&lt;?=$softlimit?&gt;&quot;</span> /&gt;%&lt;/td&gt;
<a name="l00163"></a>00163         &lt;/tr&gt;
<a name="l00164"></a>00164         &lt;tr&gt;
<a name="l00165"></a>00165           &lt;th style=<span class="stringliteral">&quot;text-align: right;&quot;</span>&gt;Enable RDFS Reasoning:&lt;/th&gt;
<a name="l00166"></a>00166           &lt;td style=<span class="stringliteral">&quot;text-align: left;&quot;</span>&gt;&lt;input type=<span class="stringliteral">&quot;checkbox&quot;</span> &lt;?php <span class="keywordflow">if</span> ($reasoning) echo <span class="stringliteral">&quot;checked=\&quot;checked\&quot;&quot;</span>; ?&gt; name=<span class="stringliteral">&quot;reasoning&quot;</span> value=<span class="stringliteral">&quot;1&quot;</span>/&gt;&lt;/td&gt;
<a name="l00167"></a>00167         &lt;/tr&gt;
<a name="l00168"></a>00168       &lt;/table&gt;
<a name="l00169"></a>00169       &lt;?php <span class="keywordflow">if</span> ($err) echo <span class="stringliteral">&quot;&lt;br/&gt;&lt;div class=\&quot;red\&quot;&gt;&lt;b&gt;$err&lt;/b&gt;&lt;/div&gt;&lt;br/&gt;\n&quot;</span>; ?&gt;
<a name="l00170"></a>00170       &lt;?php <span class="keywordflow">if</span> ($msg) echo <span class="stringliteral">&quot;&lt;br/&gt;&lt;div class=\&quot;green\&quot;&gt;&lt;b&gt;$msg&lt;/b&gt;&lt;/div&gt;&lt;br/&gt;\n&quot;</span>; ?&gt;
<a name="l00171"></a>00171       
<a name="l00172"></a>00172       &lt;p&gt;
<a name="l00173"></a>00173         &lt;textarea name=<span class="stringliteral">&quot;query&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;querybox&quot;</span> cols=<span class="stringliteral">&quot;110&quot;</span> rows=<span class="stringliteral">&quot;12&quot;</span> style=<span class="stringliteral">&quot;width: 800px;&quot;</span>&gt;&lt;?= htmlentities($query) ?&gt;&lt;/textarea&gt;
<a name="l00174"></a>00174       &lt;/p&gt;
<a name="l00175"></a>00175       &lt;script type=<span class="stringliteral">&quot;text/javascript&quot;</span>&gt;
<a name="l00176"></a>00176 var editor = CodeMirror.fromTextArea(<span class="stringliteral">&#39;querybox&#39;</span>, {
<a name="l00177"></a>00177     parserfile: [<span class="stringliteral">&quot;parsesparql.js&quot;</span>],
<a name="l00178"></a>00178     path: <span class="stringliteral">&quot;js/&quot;</span>,
<a name="l00179"></a>00179     stylesheet: <span class="stringliteral">&quot;css/sparqlcolors.css&quot;</span>
<a name="l00180"></a>00180 });
<a name="l00181"></a>00181       &lt;/script&gt;
<a name="l00182"></a>00182 
<a name="l00183"></a>00183       &lt;p&gt;
<a name="l00184"></a>00184         &lt;input type=<span class="stringliteral">&quot;submit&quot;</span> name=<span class="stringliteral">&quot;submit_query&quot;</span> value =<span class="stringliteral">&quot;Submit Query&quot;</span>/&gt;
<a name="l00185"></a>00185         &amp;nbsp;&amp;nbsp;
<a name="l00186"></a>00186         &lt;input type=<span class="stringliteral">&quot;submit&quot;</span> name=<span class="stringliteral">&quot;generate_service&quot;</span> value =<span class="stringliteral">&quot;Generate Service for Query&quot;</span>/&gt;
<a name="l00187"></a>00187       &lt;/p&gt;
<a name="l00188"></a>00188     &lt;/form&gt;
<a name="l00189"></a>00189  &lt;/div&gt;
<a name="l00190"></a>00190 &lt;/div&gt;
<a name="l00191"></a>00191 
<a name="l00192"></a>00192   &lt;br/&gt;
<a name="l00193"></a>00193     &lt;?php 
<a name="l00194"></a>00194         <span class="keywordflow">if</span> ($results){
<a name="l00195"></a>00195                 echo <span class="stringliteral">&quot;&lt;div class=\&quot;results\&quot;&gt;\n&quot;</span>;
<a name="l00196"></a>00196                 echo <span class="stringliteral">&quot;&lt;h3&gt;Results&lt;/h3&gt;&quot;</span>;
<a name="l00197"></a>00197                 <span class="keywordflow">if</span> ($timetaken==0) $timetaken=<span class="stringliteral">&quot;&lt;1&quot;</span>;
<a name="l00198"></a>00198                 echo <span class="stringliteral">&quot;&lt;p&gt;&lt;b&gt;Time Taken:&lt;/b&gt; $timetaken seconds&lt;/p&gt;\n&quot;</span>;
<a name="l00199"></a>00199                 <span class="keywordflow">if</span> ($formatting==<span class="stringliteral">&quot;HTML Table&quot;</span>){
<a name="l00200"></a>00200                         $parsedxml=<a class="code" href="xml_8inc_8php.html#a4e5d902d21dad2c18a8a57ab2b530fb0" title="Parses and XML string an returns an array-based representation of the XML. (Reverse of generateXML fu...">parseXML</a>($results);
<a name="l00201"></a>00201                         $tabres=<a class="code" href="xml_8inc_8php.html#ad9cd7e2daed92004ad5356db69393015" title="Convert the array-based representation of the SPARQL results XML into a tabular form. So it is amongst other things, easy to render as an HTML table of results.">tabulateSparqlResults</a>($parsedxml);
<a name="l00202"></a>00202                         $formattedoutput=<a class="code" href="xml_8inc_8php.html#a7914093df2e429bfa617239b946021d1" title="Generates an HTML table, allowing SPARQL results in tabular form to be displayed on a web page...">drawSparqlResultsTable</a>($tabres);
<a name="l00203"></a>00203                         $nores=<span class="keyword">sizeof</span>($tabres)-1;
<a name="l00204"></a>00204                         echo <span class="stringliteral">&quot;&lt;p&gt;&lt;b&gt;No. of Results:&lt;/b&gt; $nores&lt;/p&gt;\n&quot;</span>;
<a name="l00205"></a>00205                         echo $formattedoutput;
<a name="l00206"></a>00206                 }
<a name="l00207"></a>00207                 echo <span class="stringliteral">&quot;&lt;/div&gt;\n&lt;br/&gt;&lt;br/&gt;\n&quot;</span>;
<a name="l00208"></a>00208         }
<a name="l00209"></a>00209     ?&gt;
<a name="l00210"></a>00210     &lt;script type= <span class="stringliteral">&quot;text/javascript&quot;</span>&gt;&lt;!-- 
<a name="l00211"></a>00211       hidePrefixes();
<a name="l00212"></a>00212     --&gt;&lt;/script&gt;
<a name="l00213"></a>00213 &lt;?php 
<a name="l00214"></a>00214         include(<span class="stringliteral">&#39;footer.inc.php&#39;</span>);
<a name="l00215"></a>00215 }
<a name="l00216"></a>00216 elseif (!$done){ 
<a name="l00217"></a>00217         include_once(<span class="stringliteral">&#39;header.inc.php&#39;</span>);
<a name="l00218"></a>00218         <a class="code" href="utility_8inc_8php.html#ac39eb7cadc6cceb45c3e220c68a309c4" title="Prints HTML to display a formatted version of the error message provided.">print_error</a>($err);
<a name="l00219"></a>00219         include(<span class="stringliteral">&#39;footer.inc.php&#39;</span>);
<a name="l00220"></a>00220 } 
<a name="l00221"></a>00221 ?&gt; 
</pre></div></div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Wed Apr 17 2013 for MyExperiment RDF by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
