<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MyExperiment RDF: 4store/scripts/sqs.sh Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MyExperiment RDF&#160;<span id="projectnumber">beta</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>4store/scripts/sqs.sh</h1>  </div>
</div>
<div class="contents">
<a href="sqs_8sh.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#!/bin/bash</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">## @file 4store/scripts/sqs.sh</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span><span class="preprocessor">## @brief Script that automates the RDF generation and triplestore upload and control.</span>
<a name="l00004"></a>00004 <span class="preprocessor"></span><span class="preprocessor">## @author David R Newman</span>
<a name="l00005"></a>00005 <span class="preprocessor"></span><span class="preprocessor">## @version beta</span>
<a name="l00006"></a>00006 <span class="preprocessor"></span><span class="preprocessor">## @details Init.d style script that supports myExperiment RDF generation; starting, stopping and restarting of 4Store knowledge base interfaces; the adding and removing of graphs from 4Store knowledge bases; generation of linkset and VoiD specifications.  And overall the whole process of updating the myExperiment 4Store knowledge base so the SPARQL endpoint can query the latest available version of the myExperiment database.  The following help instructions are provided:</span>
<a name="l00007"></a>00007 <span class="preprocessor"></span><span class="preprocessor">##</span>
<a name="l00008"></a>00008 <span class="preprocessor"></span><span class="preprocessor">## Usage: triplestore &lt;triplestore_name&gt; {start|stop|restart|status|update|import|add|remove|test|list-graphs|count-triples|generate-spec|graph-size|data-dump|generate-linksets|generate-voidspec|run-diagnostic|check-versions|help} [OPTIONS]</span>
<a name="l00009"></a>00009 <span class="preprocessor"></span><span class="preprocessor">## </span>
<a name="l00010"></a>00010 <span class="preprocessor"></span><span class="preprocessor">## Examples</span>
<a name="l00011"></a>00011 <span class="preprocessor"></span><span class="preprocessor">## </span>
<a name="l00012"></a>00012 <span class="preprocessor"></span><span class="preprocessor">## ./sqs.sh &lt;triplestore&gt; start</span>
<a name="l00013"></a>00013 <span class="preprocessor"></span><span class="preprocessor">##   &lt;triplestore&gt; = [ myexp_public, ontologies ]</span>
<a name="l00014"></a>00014 <span class="preprocessor"></span><span class="preprocessor">## </span>
<a name="l00015"></a>00015 <span class="preprocessor"></span><span class="preprocessor">## ./sqs.sh &lt;triplestore&gt; stop</span>
<a name="l00016"></a>00016 <span class="preprocessor"></span><span class="preprocessor">##   &lt;triplestore&gt; = [ myexp_public, ontologies ]</span>
<a name="l00017"></a>00017 <span class="preprocessor"></span><span class="preprocessor">## </span>
<a name="l00018"></a>00018 <span class="preprocessor"></span><span class="preprocessor">## ./sqs.sh &lt;triplestore&gt; restart</span>
<a name="l00019"></a>00019 <span class="preprocessor"></span><span class="preprocessor">##   &lt;triplestore&gt; = [ myexp_public, ontologies ]</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span><span class="preprocessor">## </span>
<a name="l00021"></a>00021 <span class="preprocessor"></span><span class="preprocessor">## ./sqs.sh &lt;triplestore&gt; test</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span><span class="preprocessor">##   &lt;triplestore&gt; = [ myexp_public, ontologies ]</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span><span class="preprocessor">## </span>
<a name="l00024"></a>00024 <span class="preprocessor"></span><span class="preprocessor">## ./sqs.sh &lt;triplestore&gt; update [ no-cache ]</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span><span class="preprocessor">##   &lt;triplestore&gt; = [ myexp_public ]</span>
<a name="l00026"></a>00026 <span class="preprocessor"></span><span class="preprocessor">## </span>
<a name="l00027"></a>00027 <span class="preprocessor"></span><span class="preprocessor">## ./sqs.sh &lt;triplestore&gt; import</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span><span class="preprocessor">##   &lt;triplestore&gt; = [ myexp_public ]</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span><span class="preprocessor">## </span>
<a name="l00030"></a>00030 <span class="preprocessor"></span><span class="preprocessor">## ./sqs.sh &lt;triplestore&gt; manage-dataflows</span>
<a name="l00031"></a>00031 <span class="preprocessor"></span><span class="preprocessor">##   &lt;triplestore&gt; = [ myexp_public ]</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span><span class="preprocessor">## </span>
<a name="l00033"></a>00033 <span class="preprocessor"></span><span class="preprocessor">## ./sqs.sh &lt;triplestore&gt; add &lt;filename&gt; </span>
<a name="l00034"></a>00034 <span class="preprocessor"></span><span class="preprocessor">##   &lt;triplestore&gt; = [ myexp_public, ontologies ]</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span><span class="preprocessor">##   E.g. &lt;filename&gt; = /home/drn/hg-repos/linkeddata_dev/data/myexp_public/workflows/12</span>
<a name="l00036"></a>00036 <span class="preprocessor"></span><span class="preprocessor">## </span>
<a name="l00037"></a>00037 <span class="preprocessor"></span><span class="preprocessor">## ./sqs.sh &lt;triplestore&gt; add-list &lt;filename&gt;</span>
<a name="l00038"></a>00038 <span class="preprocessor"></span><span class="preprocessor">##   &lt;triplestore&gt; = [ myexp_public, ontologies ]</span>
<a name="l00039"></a>00039 <span class="preprocessor"></span><span class="preprocessor">##   E.g. &lt;filename&gt; = /tmp/graphs_to_add.txt</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span><span class="preprocessor">## </span>
<a name="l00041"></a>00041 <span class="preprocessor"></span><span class="preprocessor">## ./sqs.sh &lt;triplestore&gt; remove &lt;filename&gt; &lt;option&gt;</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span><span class="preprocessor">##   &lt;triplestore&gt; = [ myexp_public, ontologies ]</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span><span class="preprocessor">##   E.g. &lt;filename&gt; = /home/drn/hg-repos/linkeddata_dev/data/myexp_public/workflows/12</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span><span class="preprocessor">##   &lt;option&gt; = [ delete, NULL ]</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span><span class="preprocessor">## </span>
<a name="l00046"></a>00046 <span class="preprocessor"></span><span class="preprocessor">## ./sqs.sh &lt;triplestore&gt; remove-list &lt;filename&gt; &lt;option&gt;</span>
<a name="l00047"></a>00047 <span class="preprocessor"></span><span class="preprocessor">##   &lt;triplestore&gt; = [ myexp_public, ontologies ]</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span><span class="preprocessor">##   E.g. &lt;filename&gt; = /tmp/graphs_to_remove.txt</span>
<a name="l00049"></a>00049 <span class="preprocessor"></span><span class="preprocessor">##   &lt;option&gt; = [ delete, NULL ]</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span><span class="preprocessor">## </span>
<a name="l00051"></a>00051 <span class="preprocessor"></span><span class="preprocessor">## ./sqs.sh &lt;triplestore&gt; list-graphs</span>
<a name="l00052"></a>00052 <span class="preprocessor"></span><span class="preprocessor">##   &lt;triplestore&gt; = [ myexp_public, ontologies ]</span>
<a name="l00053"></a>00053 <span class="preprocessor"></span><span class="preprocessor">## </span>
<a name="l00054"></a>00054 <span class="preprocessor"></span><span class="preprocessor">## ./sqs.sh &lt;triplestore&gt; count-triples</span>
<a name="l00055"></a>00055 <span class="preprocessor"></span><span class="preprocessor">##   &lt;triplestore&gt; = [ myexp_public, ontologies ]</span>
<a name="l00056"></a>00056 <span class="preprocessor"></span><span class="preprocessor">## </span>
<a name="l00057"></a>00057 <span class="preprocessor"></span><span class="preprocessor">## ./sqs.sh &lt;triplestore&gt; generate-spec</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span><span class="preprocessor">##   &lt;triplestore&gt; = [ myexp_public ]</span>
<a name="l00059"></a>00059 <span class="preprocessor"></span><span class="preprocessor">## </span>
<a name="l00060"></a>00060 <span class="preprocessor"></span><span class="preprocessor">## ./sqs.sh &lt;triplestore&gt; graph-size &lt;graphuri&gt;</span>
<a name="l00061"></a>00061 <span class="preprocessor"></span><span class="preprocessor">##   &lt;triplestore&gt; = [ myexp_public ]</span>
<a name="l00062"></a>00062 <span class="preprocessor"></span><span class="preprocessor">##   E.g. &lt;graphuri&gt; = file:///home/drn/hg-repos/linkeddata_dev/data/myexp_public/workflows/12</span>
<a name="l00063"></a>00063 <span class="preprocessor"></span><span class="preprocessor">## </span>
<a name="l00064"></a>00064 <span class="preprocessor"></span><span class="preprocessor">## ./sqs.sh &lt;triplestore&gt; data-dump</span>
<a name="l00065"></a>00065 <span class="preprocessor"></span><span class="preprocessor">##   &lt;triplestore&gt; = [ myexp_public ]</span>
<a name="l00066"></a>00066 <span class="preprocessor"></span><span class="preprocessor">## </span>
<a name="l00067"></a>00067 <span class="preprocessor"></span><span class="preprocessor">## ./sqs.sh &lt;triplestore&gt; generate-data-and-ontologies-zip</span>
<a name="l00068"></a>00068 <span class="preprocessor"></span><span class="preprocessor">##   &lt;triplestore&gt; = [ myexp_public ]</span>
<a name="l00069"></a>00069 <span class="preprocessor"></span><span class="preprocessor">## </span>
<a name="l00070"></a>00070 <span class="preprocessor"></span><span class="preprocessor">## ./sqs.sh &lt;triplestore&gt; generate-linksets</span>
<a name="l00071"></a>00071 <span class="preprocessor"></span><span class="preprocessor">##   &lt;triplestore&gt; = [ myexp_public ]</span>
<a name="l00072"></a>00072 <span class="preprocessor"></span><span class="preprocessor">## </span>
<a name="l00073"></a>00073 <span class="preprocessor"></span><span class="preprocessor">## ./sqs.sh &lt;triplestore&gt; generate-voidspec</span>
<a name="l00074"></a>00074 <span class="preprocessor"></span><span class="preprocessor">##   &lt;triplestore&gt; = [ myexp_public ]</span>
<a name="l00075"></a>00075 <span class="preprocessor"></span><span class="preprocessor">## </span>
<a name="l00076"></a>00076 <span class="preprocessor"></span><span class="preprocessor">## ./sqs.sh &lt;triplestore&gt; run-diagnostic</span>
<a name="l00077"></a>00077 <span class="preprocessor"></span><span class="preprocessor">##   &lt;triplestore&gt; = [ myexp_public ]</span>
<a name="l00078"></a>00078 <span class="preprocessor"></span><span class="preprocessor">## </span>
<a name="l00079"></a>00079 <span class="preprocessor"></span><span class="preprocessor">## ./sqs.sh &lt;triplestore&gt; check-versions</span>
<a name="l00080"></a>00080 <span class="preprocessor"></span><span class="preprocessor">##   &lt;triplestore&gt; = [ myexp_public ]</span>
<a name="l00081"></a>00081 <span class="preprocessor"></span><span class="preprocessor">## </span>
<a name="l00082"></a>00082 <span class="preprocessor"></span><span class="preprocessor">## ./sqs.sh &lt;triplestore&gt; check-entity-sizes</span>
<a name="l00083"></a>00083 <span class="preprocessor"></span><span class="preprocessor">##   &lt;triplestore&gt; = [ myexp_public ]</span>
<a name="l00084"></a>00084 <span class="preprocessor"></span><span class="preprocessor">## </span>
<a name="l00085"></a>00085 <span class="preprocessor"></span><span class="preprocessor">## ./sqs.sh &lt;triplestore&gt; help</span>
<a name="l00086"></a>00086 <span class="preprocessor"></span><span class="preprocessor">##   &lt;triplestore&gt; = [ myexp_public ontologies ]</span>
<a name="l00087"></a>00087 <span class="preprocessor"></span><span class="preprocessor">## </span>
<a name="l00088"></a>00088 <span class="preprocessor"></span>
<a name="l00089"></a>00089 d=`dirname $0`
<a name="l00090"></a>00090 basedir=`cd ${d}; pwd`
<a name="l00091"></a>00091 source <span class="stringliteral">&quot;$basedir/settings.sh&quot;</span>
<a name="l00092"></a>00092 
<a name="l00093"></a>00093 check(){
<a name="l00094"></a>00094         ps aux | grep 4s- | grep $1 | grep -v grep | wc -l
<a name="l00095"></a>00095 }       
<a name="l00096"></a>00096 check_triplestore(){
<a name="l00097"></a>00097         <span class="keywordflow">case</span> $1 in
<a name="l00098"></a>00098           $TRIPLESTORE)
<a name="l00099"></a>00099                 ;;
<a name="l00100"></a>00100           ontologies)
<a name="l00101"></a>00101                 ;;
<a name="l00102"></a>00102           *)
<a name="l00103"></a>00103                 echo <span class="stringliteral">&quot;[`date +%T`] Unrecognized SPARQL Query Server: $1&quot;</span>
<a name="l00104"></a>00104                 exit
<a name="l00105"></a>00105                 ;;
<a name="l00106"></a>00106         esac
<a name="l00107"></a>00107 }
<a name="l00108"></a>00108         
<a name="l00109"></a>00109 stop(){
<a name="l00110"></a>00110         check_triplestore $1
<a name="l00111"></a>00111         running=$(check $1)
<a name="l00112"></a>00112         <span class="keywordflow">if</span> [ $running -eq  0 ]; then
<a name="l00113"></a>00113                 echo <span class="stringliteral">&quot;[`date +%T`] SPARQL Query Server $1 is not running&quot;</span>
<a name="l00114"></a>00114         <span class="keywordflow">else</span>
<a name="l00115"></a>00115                 <span class="keywordflow">for</span> pid in `ps aux | grep $1 | grep 4s- | awk <span class="stringliteral">&#39;BEGIN{FS=&quot; &quot;}{print $2}&#39;</span>`; <span class="keywordflow">do</span>
<a name="l00116"></a>00116                         kill -9 $pid
<a name="l00117"></a>00117                 done    
<a name="l00118"></a>00118                 echo <span class="stringliteral">&quot;[`date +%T`] Stopped SPARQL Query Server $1&quot;</span>
<a name="l00119"></a>00119         fi
<a name="l00120"></a>00120 }
<a name="l00121"></a>00121 start(){
<a name="l00122"></a>00122         check_triplestore $1
<a name="l00123"></a>00123         running=$(check $1)
<a name="l00124"></a>00124         <span class="keywordflow">if</span> [ $running -gt 0 ]; then
<a name="l00125"></a>00125                 echo <span class="stringliteral">&quot;[`date +%T`] Cannot start SPARQL Query Server $1 as is already running&quot;</span>
<a name="l00126"></a>00126                 exit
<a name="l00127"></a>00127         fi
<a name="l00128"></a>00128         $STORE4EXEC_PATH/4s-backend $1
<a name="l00129"></a>00129         echo <span class="stringliteral">&quot;[`date +%T`] Started SPARQL Query Server using $1&quot;</span>
<a name="l00130"></a>00130 }
<a name="l00131"></a>00131 status(){
<a name="l00132"></a>00132         check_triplestore $1
<a name="l00133"></a>00133         running=$(check $1)
<a name="l00134"></a>00134         updatetime=`head -n 1 $STORE4_PATH/log/$1_updated.log`
<a name="l00135"></a>00135         updatetimef=`$PHPEXEC_PATH/php $STORE4_PATH/scripts/dateFormatter.php <span class="stringliteral">&quot;$updatetime&quot;</span>`
<a name="l00136"></a>00136         <span class="keywordflow">if</span> [ $running -gt 0 ]; then  
<a name="l00137"></a>00137                 echo <span class="stringliteral">&quot;[`date +%T`] SPARQL Query Server $1 running&quot;</span>
<a name="l00138"></a>00138         <span class="keywordflow">else</span>
<a name="l00139"></a>00139                 echo <span class="stringliteral">&quot;[`date +%T`] SPARQL Query Server $1 is not running&quot;</span>
<a name="l00140"></a>00140         fi
<a name="l00141"></a>00141         echo <span class="stringliteral">&quot;[`date +%T`] SPARQL Query Server $1 was updated with database snapshot from $updatetimef ($updatetime)&quot;</span>
<a name="l00142"></a>00142 }
<a name="l00143"></a>00143 test(){
<a name="l00144"></a>00144         `$PHPEXEC_PATH/php $STORE4_PATH/scripts/test4store.php $1` &amp;&amp; { 
<a name="l00145"></a>00145                 echo <span class="stringliteral">&quot;[`date +%T`] SPARQL Query Server $1 is functioning correctly&quot;</span> 
<a name="l00146"></a>00146         } || { 
<a name="l00147"></a>00147                 echo <span class="stringliteral">&quot;[`date +%T`] SPARQL Query Server $1 is not functioning correctly and will be restarted&quot;</span>; 
<a name="l00148"></a>00148                 stop $1; 
<a name="l00149"></a>00149                 sudo /etc/init.d/avahi-daemon restart; 
<a name="l00150"></a>00150                 start $1; 
<a name="l00151"></a>00151         }
<a name="l00152"></a>00152 }
<a name="l00153"></a>00153 add(){
<a name="l00154"></a>00154         error=`$STORE4EXEC_PATH/4s-<span class="keyword">import</span> $1 $2 2&gt;&amp;1`
<a name="l00155"></a>00155         errcount=1
<a name="l00156"></a>00156         <span class="keywordflow">while</span> [[ -n <span class="stringliteral">&quot;$error&quot;</span> &amp;&amp; $errcount -lt 3 ]]; <span class="keywordflow">do</span>
<a name="l00157"></a>00157                 sleep 1;
<a name="l00158"></a>00158                 error=`$STORE4EXEC_PATH/4s-<span class="keyword">import</span> $1 $2 2&gt;&amp;1`
<a name="l00159"></a>00159                 errcount=$errcount+1
<a name="l00160"></a>00160         done    
<a name="l00161"></a>00161         <span class="keywordflow">if</span> [ -n <span class="stringliteral">&quot;$error&quot;</span> ]; then 
<a name="l00162"></a>00162                 echo 0
<a name="l00163"></a>00163         <span class="keywordflow">else</span>
<a name="l00164"></a>00164                 echo 1
<a name="l00165"></a>00165         fi
<a name="l00166"></a>00166 }
<a name="l00167"></a>00167 <span class="keyword">remove</span>(){
<a name="l00168"></a>00168         <span class="keywordflow">if</span> [ ${2:0:7} == <span class="stringliteral">&quot;http://&quot;</span> ]; then
<a name="l00169"></a>00169                 $STORE4EXEC_PATH/4s-<span class="keyword">delete</span>-model $1 $2
<a name="l00170"></a>00170         <span class="keywordflow">else</span>
<a name="l00171"></a>00171                 $STORE4EXEC_PATH/4s-<span class="keyword">delete</span>-model $1 file:<span class="comment">//$2</span>
<a name="l00172"></a>00172                 <span class="keywordflow">if</span> [[ <span class="stringliteral">&quot;$3&quot;</span> == <span class="stringliteral">&quot;delete&quot;</span> ]]; then
<a name="l00173"></a>00173                         <span class="keywordflow">if</span> [ -f <span class="stringliteral">&quot;$2&quot;</span> ]; then
<a name="l00174"></a>00174                                 echo $2 | grep -v <span class="charliteral">&#39;*&#39;</span> | grep -v <span class="stringliteral">&#39;^-r&#39;</span> | xargs rm
<a name="l00175"></a>00175                                 echo <span class="stringliteral">&quot;[`date +%T`] Deleted $2&quot;</span>
<a name="l00176"></a>00176                         fi
<a name="l00177"></a>00177                 fi
<a name="l00178"></a>00178         fi
<a name="l00179"></a>00179 }
<a name="l00180"></a>00180 add-list(){
<a name="l00181"></a>00181         thelist=`cat $2 | tr <span class="charliteral">&#39;\n&#39;</span> <span class="charliteral">&#39; &#39;</span>`
<a name="l00182"></a>00182         $STORE4EXEC_PATH/4s-<span class="keyword">import</span> $1 $thelist 2&gt;&amp;1
<a name="l00183"></a>00183         echo <span class="stringliteral">&quot;[`date +%T`] Finished adding all graphs in $2 to $1 Knowledge Base&quot;</span>
<a name="l00184"></a>00184 }
<a name="l00185"></a>00185 <span class="keyword">remove</span>-list(){
<a name="l00186"></a>00186         <span class="keywordflow">for</span> graph in `cat $2`; <span class="keywordflow">do</span>
<a name="l00187"></a>00187                 <span class="keyword">remove</span> $1 $graph $3
<a name="l00188"></a>00188                 echo <span class="stringliteral">&quot;[`date +%T`] Removed graph $graph from $1 Knowledge Base&quot;</span>
<a name="l00189"></a>00189         done
<a name="l00190"></a>00190 }
<a name="l00191"></a>00191 
<a name="l00192"></a>00192 update-cached-files(){  
<a name="l00193"></a>00193         echo <span class="stringliteral">&quot;[`date +%T`] Updating Cached Files for $1&quot;</span>
<a name="l00194"></a>00194         $PHPEXEC_PATH/php $STORE4_PATH/scripts/changeddata.php $1
<a name="l00195"></a>00195         echo <span class="stringliteral">&quot;[`date +%T`] Updated Cached Files for $1&quot;</span>
<a name="l00196"></a>00196 }
<a name="l00197"></a>00197 <span class="keyword">import</span>(){
<a name="l00198"></a>00198         day=`date +%e`
<a name="l00199"></a>00199         month=`date +%b`
<a name="l00200"></a>00200         date +%s &gt; $STORE4_PATH/log/$1_update_time.log
<a name="l00201"></a>00201         ontologies=( myexp_snarm.owl myexp_base.owl myexp_annot.owl myexp_attrib_cred.owl myexp_view_down.owl myexp_packs.owl myexp_contrib.owl myexp_exp.owl myexp_components.owl myexp_specific.owl )
<a name="l00202"></a>00202         <span class="keywordflow">for</span> o in ${ontologies[@]}; <span class="keywordflow">do</span>
<a name="l00203"></a>00203                 added=`add $1 $LD_PATH/http/ontologies/$o`
<a name="l00204"></a>00204                 <span class="keywordflow">if</span> [ $added -gt 0 ]; then
<a name="l00205"></a>00205                         echo <span class="stringliteral">&quot;[`date +%T`] Added/Updated myExperiment Ontology module $LD_PATH/http/ontologies/$o to $1 Knowledge Base&quot;</span>
<a name="l00206"></a>00206                 <span class="keywordflow">else</span>
<a name="l00207"></a>00207                         echo <span class="stringliteral">&quot;[`date +%T`] Could Not Add/Update myExperiment Ontology module $LD_PATH/http/ontologies/$o to $1 Knowledge Base&quot;</span>
<a name="l00208"></a>00208                 fi
<a name="l00209"></a>00209         done
<a name="l00210"></a>00210         added=`add $1 $DATA_PATH/$1/myexperiment.rdf`
<a name="l00211"></a>00211         <span class="keywordflow">if</span> [ $added -gt 0 ]; then
<a name="l00212"></a>00212                 echo <span class="stringliteral">&quot;[`date +%T`] Added/Updated myExperiment Public Dataset ($DATA_PATH/$1/myexperiment.rdf) to $1 Knowledge Base&quot;</span>
<a name="l00213"></a>00213         <span class="keywordflow">else</span>
<a name="l00214"></a>00214                 echo <span class="stringliteral">&quot;[`date +%T`] Could Not Add/Update myExperiment Public Dataset ($DATA_PATH/$1/myexperiment.rdf) to $1 Knowledge Base&quot;</span>
<a name="l00215"></a>00215         fi
<a name="l00216"></a>00216         count-triples $1
<a name="l00217"></a>00217 }
<a name="l00218"></a>00218 update(){
<a name="l00219"></a>00219         check_triplestore $1
<a name="l00220"></a>00220         <span class="keywordflow">if</span> [ <span class="stringliteral">&quot;$2&quot;</span> != <span class="stringliteral">&quot;no-db-update&quot;</span> ]; then
<a name="l00221"></a>00221                 update-database
<a name="l00222"></a>00222         fi
<a name="l00223"></a>00223         check-versions $1
<a name="l00224"></a>00224         generate-dataflows-rdf $1
<a name="l00225"></a>00225         data-dump $1
<a name="l00226"></a>00226         <span class="keyword">import</span> $1
<a name="l00227"></a>00227         check-entity-sizes
<a name="l00228"></a>00228         generate-data-and-ontologies-zip $1
<a name="l00229"></a>00229         generate-spec $1
<a name="l00230"></a>00230         generate-linksets $1
<a name="l00231"></a>00231         generate-voidspec $1
<a name="l00232"></a>00232 }       
<a name="l00233"></a>00233 list-graphs(){
<a name="l00234"></a>00234         check_triplestore $1
<a name="l00235"></a>00235         echo <span class="stringliteral">&quot;[`date +%T`] Listing Graphs of $1 Triplestore:&quot;</span>
<a name="l00236"></a>00236         $PHPEXEC_PATH/php $STORE4_PATH/scripts/listGraphs.php $1
<a name="l00237"></a>00237 }
<a name="l00238"></a>00238 count-triples(){
<a name="l00239"></a>00239         check_triplestore $1
<a name="l00240"></a>00240         notriples=`$STORE4EXEC_PATH/4s-size $1 | tail -3 | head -1 | awk <span class="stringliteral">&#39;BEGIN{FS=&quot; &quot;}{print $2}&#39;</span>`
<a name="l00241"></a>00241         echo <span class="stringliteral">&quot;[`date +%T`] $1 Triplestore has $notriples triples&quot;</span>
<a name="l00242"></a>00242         echo $notriples &gt; $STORE4_PATH/log/$1_triples.log
<a name="l00243"></a>00243         echo <span class="stringliteral">&quot;[`date +%T`] Printing number of triples to file $STORE4_PATH/log/$1_triples.log&quot;</span>
<a name="l00244"></a>00244 }
<a name="l00245"></a>00245 generate-dataflows-rdf(){
<a name="l00246"></a>00246         echo <span class="stringliteral">&quot;[`date +%T`] Generating Dataflow RDF&quot;</span>
<a name="l00247"></a>00247         `which php` $STORE4_PATH/scripts/generateDataflowRDF.php
<a name="l00248"></a>00248 }
<a name="l00249"></a>00249 generate-spec(){
<a name="l00250"></a>00250         <span class="keywordflow">if</span> [ $1 == $TRIPLESTORE ]; then
<a name="l00251"></a>00251                 echo <span class="stringliteral">&quot;[`date +%T`] Retrieving specification document from $HTTPSPEC_PATH/current/spec&quot;</span>
<a name="l00252"></a>00252                 wget -O $DATA_PATH/$1/html/spec.html -q $HTTPSPEC_PATH/current/spec
<a name="l00253"></a>00253                 echo <span class="stringliteral">&quot;[`date +%T`] Retrieved specification document for $1 and saved to $DATA_PATH/$1/html/spec.html&quot;</span>
<a name="l00254"></a>00254 <span class="preprocessor">                #echo &quot;[`date +%T`] Setting group for permissions to $HTTPGROUP for $DATA_PATH/$1/html/spec.html&quot;</span>
<a name="l00255"></a>00255 <span class="preprocessor"></span><span class="preprocessor">                #sudo chgrp $HTTPGROUP $DATA_PATH/$1/html/spec.html</span>
<a name="l00256"></a>00256 <span class="preprocessor"></span>        <span class="keywordflow">else</span>
<a name="l00257"></a>00257                 echo <span class="stringliteral">&quot;[`date +%T`] Specification document can not be generated for $1&quot;</span>
<a name="l00258"></a>00258         fi
<a name="l00259"></a>00259 }
<a name="l00260"></a>00260 graph-size(){
<a name="l00261"></a>00261         check_triplestore $1
<a name="l00262"></a>00262         notriples=`$STORE4EXEC_PATH/4s-query $1 <span class="stringliteral">&quot;SELECT * WHERE { GRAPH &lt;$2&gt; { ?s ?p ?o }}&quot;</span> | grep <span class="stringliteral">&quot;&lt;result&gt;&quot;</span> | wc -l`  
<a name="l00263"></a>00263         echo <span class="stringliteral">&quot;[`date +%T`] There are $notriples triples in $2&quot;</span>
<a name="l00264"></a>00264 }
<a name="l00265"></a>00265 data-dump(){
<a name="l00266"></a>00266         check_triplestore $1
<a name="l00267"></a>00267         $PHPEXEC_PATH/php $STORE4_PATH/scripts/datadump.php $1
<a name="l00268"></a>00268 }
<a name="l00269"></a>00269 generate-linksets(){
<a name="l00270"></a>00270         check_triplestore $1
<a name="l00271"></a>00271         <span class="keywordflow">for</span> l in `cat $STORE4_PATH/config/linksets.txt`; <span class="keywordflow">do</span>
<a name="l00272"></a>00272                 linkset=`echo $l | awk <span class="stringliteral">&#39;BEGIN{FS=&quot;|&quot;}{print $1}&#39;</span>`
<a name="l00273"></a>00273                 linkseturi=`echo $l | awk <span class="stringliteral">&#39;BEGIN{FS=&quot;|&quot;}{print $2}&#39;</span>`
<a name="l00274"></a>00274                 $STORE4EXEC_PATH/4s-query -f text --soft-limit=1000000 $1 <span class="stringliteral">&quot;select * where { ?s ?p ?o . FILTER(isURI(?o) &amp;&amp; REGEX(STR(?o),&#39;^$linkseturi+&#39;,&#39;i&#39;))}&quot;</span> | grep <span class="stringliteral">&quot;^&lt;&quot;</span> | sed <span class="stringliteral">&quot;s/$/ ./g&quot;</span> &gt; $DATA_PATH/$1/linksets/myExperiment-$linkset.nt
<a name="l00275"></a>00275                 echo <span class="stringliteral">&quot;[`date +%T`] Created Linkset $DATA_PATH/$1/linksets/myExperiment-$linkset.nt&quot;</span>
<a name="l00276"></a>00276         done
<a name="l00277"></a>00277 }
<a name="l00278"></a>00278 generate-voidspec(){
<a name="l00279"></a>00279         check_triplestore $1
<a name="l00280"></a>00280         notriples=`cat $STORE4_PATH/log/${1}_datadump_triples.log`
<a name="l00281"></a>00281         outputfile=<span class="stringliteral">&quot;$DATA_PATH/${1}/void.rdf&quot;</span>
<a name="l00282"></a>00282         cat $STORE4_PATH/config/voidbase.rdf | sed <span class="stringliteral">&quot;s/NO_OF_TRIPLES/$notriples/&quot;</span> &gt; $outputfile
<a name="l00283"></a>00283         <span class="keywordflow">for</span> l in `cat $STORE4_PATH/config/linksets.txt`; <span class="keywordflow">do</span>
<a name="l00284"></a>00284                 linkset=`echo $l | awk <span class="stringliteral">&#39;BEGIN{FS=&quot;|&quot;}{print $1}&#39;</span>`
<a name="l00285"></a>00285                 linkseturi=`echo $l | awk <span class="stringliteral">&#39;BEGIN{FS=&quot;|&quot;}{print $2}&#39;</span>`
<a name="l00286"></a>00286                 objset=`echo $l | awk <span class="stringliteral">&#39;BEGIN{FS=&quot;|&quot;}{print $3}&#39;</span>`
<a name="l00287"></a>00287                 filename=<span class="stringliteral">&quot;myExperiment-$linkset&quot;</span>
<a name="l00288"></a>00288                 nolinks=`cat $DATA_PATH/${1}/linksets/$filename.nt | wc -l`
<a name="l00289"></a>00289                 echo <span class="stringliteral">&quot;  &lt;void:Linkset rdf:about=\&quot;$HTTPRDF_PATH/linksets/$filename\&quot;&gt;</span>
<a name="l00290"></a>00290 <span class="stringliteral">    &lt;void:subjectsTarget rdf:resource=\&quot;$HTTPRDF_PATH/void.rdf#myexpDataset\&quot;/&gt;</span>
<a name="l00291"></a>00291 <span class="stringliteral">    &lt;void:objectsTarget rdf:resource=\&quot;$objset\&quot;/&gt;</span>
<a name="l00292"></a>00292 <span class="stringliteral">    &lt;void:dataDump rdf:resource=\&quot;$HTTPRDF_PATH/linksets/$filename.nt\&quot;/&gt;&quot;</span> &gt;&gt; $outputfile
<a name="l00293"></a>00293                 cat $DATA_PATH/${1}/linksets/$filename.nt | awk <span class="stringliteral">&#39;BEGIN{FS=&quot; &quot;}{print $2}&#39;</span> | sed <span class="stringliteral">&#39;s/[&lt;&gt;]//g&#39;</span> | sort -u | sed <span class="stringliteral">&#39;s/^/    &lt;void:linkPredicate rdf:resource=\&quot;/g&#39;</span> | sed <span class="stringliteral">&#39;s/$/\&quot;\/&gt;/g&#39;</span> &gt;&gt; $outputfile
<a name="l00294"></a>00294                 echo <span class="stringliteral">&quot;    &lt;void:statItem&gt;</span>
<a name="l00295"></a>00295 <span class="stringliteral">      &lt;scovo:Item&gt;</span>
<a name="l00296"></a>00296 <span class="stringliteral">        &lt;scovo:dimension rdf:resource=\&quot;http://rdfs.org/ns/void#noOfTriples\&quot;/&gt;</span>
<a name="l00297"></a>00297 <span class="stringliteral">        &lt;rdf:value rdf:datatype=\&quot;http://www.w3.org/2001/XMLSchema#nonNegativeInteger\&quot;&gt;$nolinks&lt;/rdf:value&gt;</span>
<a name="l00298"></a>00298 <span class="stringliteral">      &lt;/scovo:Item&gt;</span>
<a name="l00299"></a>00299 <span class="stringliteral">    &lt;/void:statItem&gt;</span>
<a name="l00300"></a>00300 <span class="stringliteral">  &lt;/void:Linkset&gt;</span>
<a name="l00301"></a>00301 <span class="stringliteral">&quot;</span> &gt;&gt; $outputfile
<a name="l00302"></a>00302         done
<a name="l00303"></a>00303         echo <span class="stringliteral">&quot;&lt;/rdf:RDF&gt;&quot;</span> &gt;&gt; $outputfile
<a name="l00304"></a>00304         echo <span class="stringliteral">&quot;[`date +%T`] Created voID specification at $outputfile&quot;</span>
<a name="l00305"></a>00305 }
<a name="l00306"></a>00306 run-diagnostic(){
<a name="l00307"></a>00307         check_triplestore $1
<a name="l00308"></a>00308         <span class="keywordflow">if</span> [[ <span class="stringliteral">&quot;$2&quot;</span> == <span class="stringliteral">&quot;graphs&quot;</span> ]]; then
<a name="l00309"></a>00309                 nographs=`$STORE4EXEC_PATH/4s-query --soft-limit=1000000 $1 <span class="stringliteral">&quot;SELECT DISTINCT ?g WHERE { GRAPH ?g { ?s ?p ?o }}&quot;</span> | grep <span class="stringliteral">&quot;&lt;result&gt;&quot;</span> | wc -l`
<a name="l00310"></a>00310                 echo <span class="stringliteral">&quot;[`date +%T`] $1 has $nographs graphs&quot;</span>
<a name="l00311"></a>00311                 <span class="keywordflow">for</span> e in ${ENTITIES[@]}; <span class="keywordflow">do</span>
<a name="l00312"></a>00312                    nofiles=`ls $DATA_PATH/$1/$e/ | wc -l`
<a name="l00313"></a>00313                    nographs=`$STORE4EXEC_PATH/4s-query --soft-limit=1000000 $1 <span class="stringliteral">&quot;SELECT DISTINCT ?g WHERE { GRAPH ?g { ?s ?p ?o } . FILTER (REGEX(STR(?g),&#39;/$e/&#39;)) }&quot;</span> | grep <span class="stringliteral">&quot;&lt;result&gt;&quot;</span> | wc -l`
<a name="l00314"></a>00314                   echo <span class="stringliteral">&quot;[`date +%T`] $e has $nographs graphs for $nofiles files&quot;</span>
<a name="l00315"></a>00315                 done
<a name="l00316"></a>00316         elif [[ <span class="stringliteral">&quot;$2&quot;</span> == <span class="stringliteral">&quot;triples&quot;</span> ]]; then
<a name="l00317"></a>00317                 count-triples $1
<a name="l00318"></a>00318                 <span class="keywordflow">for</span> e in ${ENTITIES[@]}; <span class="keywordflow">do</span>
<a name="l00319"></a>00319                    notriples=`$STORE4EXEC_PATH/4s-query --soft-limit=1000000 $1 <span class="stringliteral">&quot;SELECT ?o WHERE { GRAPH ?g { ?s ?p ?o } . FILTER (REGEX(STR(?g),&#39;/$e/&#39;)) }&quot;</span> | grep <span class="stringliteral">&quot;&lt;result&gt;&quot;</span> | wc -l`
<a name="l00320"></a>00320                    echo <span class="stringliteral">&quot;[`date +%T`] $e has $notriples triples&quot;</span>
<a name="l00321"></a>00321                 done
<a name="l00322"></a>00322         <span class="keywordflow">else</span>
<a name="l00323"></a>00323                 $STORE4EXEC_PATH/4s-query --soft-limit=1000000 $1 <span class="stringliteral">&quot;SELECT ?g WHERE { GRAPH ?g { ?s ?p ?o } . FILTER (REGEX(STR(?g),&#39;/$2/&#39;)) }&quot;</span> | grep <span class="stringliteral">&quot;&lt;binding&quot;</span> | awk <span class="stringliteral">&#39;BEGIN{FS=&quot;&lt;|&gt;&quot;}{print $5}&#39;</span> | awk <span class="stringliteral">&#39;BEGIN{FS=&quot;/&quot;}{print $NF}&#39;</span> | sort | uniq -c
<a name="l00324"></a>00324         fi
<a name="l00325"></a>00325 }
<a name="l00326"></a>00326 check-versions(){
<a name="l00327"></a>00327 <span class="preprocessor">#       store4version=`$STORE4EXEC_PATH/4s-info --version 2&gt;&amp;1 | head -n 1 | awk &#39;{print $NF}&#39;`</span>
<a name="l00328"></a>00328 <span class="preprocessor"></span>        store4version=<span class="stringliteral">&quot;4sr-2fc0eaf&quot;</span>
<a name="l00329"></a>00329         raptorversion=`pkg-config raptor2 --modversion`
<a name="l00330"></a>00330         rasqalversion=`$STORE4EXEC_PATH/rasqal-config --version`
<a name="l00331"></a>00331         echo <span class="stringliteral">&quot;4store ($store4version), Raptor (v$raptorversion), Rasqal (v$rasqalversion)&quot;</span> &gt; $STORE4_PATH/log/4storeversions.log
<a name="l00332"></a>00332         echo <span class="stringliteral">&quot;[`date +%T`] Check 4Store, Raptor and Rasqal versions for $1 triplestore and written to $STORE4_PATH/log/4storeversions.log&quot;</span>
<a name="l00333"></a>00333 }
<a name="l00334"></a>00334 
<a name="l00335"></a>00335 check-entity-sizes(){
<a name="l00336"></a>00336         $PHPEXEC_PATH/php $LD_PATH/rdfgen/testrdfgen.php 1&gt;&gt; ${STORE4_PATH}/log/entity_sizes.log
<a name="l00337"></a>00337 }
<a name="l00338"></a>00338 update-database(){
<a name="l00339"></a>00339         cd $STORE4_PATH/scripts
<a name="l00340"></a>00340         scp backup@tents:/home/backup/www.myexperiment.org/latest_db.txt /tmp/
<a name="l00341"></a>00341         filepath=`cat /tmp/latest_db.txt`
<a name="l00342"></a>00342         filename=`cat /tmp/latest_db.txt | awk <span class="stringliteral">&#39;BEGIN{FS=&quot;/&quot;}{ print $NF }&#39;</span>`
<a name="l00343"></a>00343         scp backup@tents:$filepath /tmp/
<a name="l00344"></a>00344         echo <span class="stringliteral">&quot;[`date +%T`] Downloaded Latest myExperiment Database Snapshot: $filename&quot;</span>
<a name="l00345"></a>00345         <span class="keywordflow">if</span> [ ${#MYSQL_PASSWORD} -gt 0 ]; then
<a name="l00346"></a>00346                 mysqlparams=<span class="stringliteral">&quot;-p${MYSQL_PASSWORD}&quot;</span>
<a name="l00347"></a>00347         fi
<a name="l00348"></a>00348         <span class="keywordflow">if</span> [ ${#MYSQL_HOST} -gt 0 ]; then
<a name="l00349"></a>00349                 mysqlparams=<span class="stringliteral">&quot;-h ${MYSQL_HOST} ${mysqlparams}&quot;</span>
<a name="l00350"></a>00350         fi
<a name="l00351"></a>00351         
<a name="l00352"></a>00352         zcat /tmp/$filename | egrep -v <span class="stringliteral">&#39;^INSERT INTO `(activity_limits|downloads|key_permissions|oauth_|picture|previews|service|topic|viewings|workflow_processors)&#39;</span> | mysql -u $MYSQL_USERNAME $mysqlparams m2_production
<a name="l00353"></a>00353         echo <span class="stringliteral">&quot;[`date +%T`] Uploaded SQL File ($filename) to MySQL&quot;</span>
<a name="l00354"></a>00354         rm -f /tmp/$filename
<a name="l00355"></a>00355 }
<a name="l00356"></a>00356 
<a name="l00357"></a>00357 generate-data-and-ontologies-zip(){
<a name="l00358"></a>00358         myexp_dao_tempdir=`mktemp -d /tmp/myexp_dao_XXXXX`
<a name="l00359"></a>00359         mkdir $myexp_dao_tempdir/myexp_data_and_ontologies
<a name="l00360"></a>00360         cd $myexp_dao_tempdir 
<a name="l00361"></a>00361         cp $DATA_PATH/$1/myexperiment.rdf myexp_data_and_ontologies/
<a name="l00362"></a>00362         cp $LD_PATH/http/ontologies/myexp_* myexp_data_and_ontologies/
<a name="l00363"></a>00363         zip -r myexp_data_and_ontologies myexp_data_and_ontologies/
<a name="l00364"></a>00364         mv myexp_data_and_ontologies.zip $DATA_PATH/$1/
<a name="l00365"></a>00365         rm -r $myexp_dao_tempdir
<a name="l00366"></a>00366         echo <span class="stringliteral">&quot;[`date +%T`] Created myexp_data_and_ontologies.zip containing RDF graphs for all myExperiment&#39;s public data and ontologies.&quot;</span>
<a name="l00367"></a>00367 }
<a name="l00368"></a>00368         
<a name="l00369"></a>00369 <span class="keywordflow">case</span> <span class="stringliteral">&quot;$2&quot;</span> in
<a name="l00370"></a>00370   start)
<a name="l00371"></a>00371         start $1
<a name="l00372"></a>00372         ;;
<a name="l00373"></a>00373   stop)
<a name="l00374"></a>00374         stop $1
<a name="l00375"></a>00375         ;;
<a name="l00376"></a>00376   status)
<a name="l00377"></a>00377         status $1
<a name="l00378"></a>00378         ;;
<a name="l00379"></a>00379   restart)
<a name="l00380"></a>00380         <span class="keywordflow">if</span> [ -n <span class="stringliteral">&quot;$3&quot;</span> ]; then
<a name="l00381"></a>00381           sleep $3
<a name="l00382"></a>00382         fi 
<a name="l00383"></a>00383         stop $1
<a name="l00384"></a>00384         start $1
<a name="l00385"></a>00385         ;;
<a name="l00386"></a>00386   test)
<a name="l00387"></a>00387         echo <span class="stringliteral">&quot;============== `date` ==============&quot;</span>
<a name="l00388"></a>00388         test $1
<a name="l00389"></a>00389         ;;
<a name="l00390"></a>00390   update)
<a name="l00391"></a>00391         echo <span class="stringliteral">&quot;============== `date` ==============&quot;</span>
<a name="l00392"></a>00392         update $1 $3
<a name="l00393"></a>00393         ;;
<a name="l00394"></a>00394   <span class="keyword">import</span>)
<a name="l00395"></a>00395         <span class="keyword">import</span> $1
<a name="l00396"></a>00396         ;;
<a name="l00397"></a>00397   reason-ontology)
<a name="l00398"></a>00398         reason-ontology $1
<a name="l00399"></a>00399         ;;
<a name="l00400"></a>00400   generate-dataflows-rdf)
<a name="l00401"></a>00401         generate-dataflows-rdf $1
<a name="l00402"></a>00402         ;;
<a name="l00403"></a>00403   add)
<a name="l00404"></a>00404         added=`add $1 $3`
<a name="l00405"></a>00405         <span class="keywordflow">if</span> [ $added -gt 0 ]; then
<a name="l00406"></a>00406                 echo <span class="stringliteral">&quot;[`date +%T`] Added $3 to $1 Knowledge Base&quot;</span>
<a name="l00407"></a>00407         <span class="keywordflow">else</span>
<a name="l00408"></a>00408                 echo <span class="stringliteral">&quot;[`date +%T`] Could Not Add $3 to $1 Knowledge Base&quot;</span>
<a name="l00409"></a>00409         fi
<a name="l00410"></a>00410         count-triples $1
<a name="l00411"></a>00411         ;;
<a name="l00412"></a>00412   add-list)
<a name="l00413"></a>00413         add-list $1 $3
<a name="l00414"></a>00414         count-triples $1 
<a name="l00415"></a>00415         ;;
<a name="l00416"></a>00416   <span class="keyword">remove</span>)
<a name="l00417"></a>00417         <span class="keyword">remove</span> $1 $3 $4
<a name="l00418"></a>00418         echo <span class="stringliteral">&quot;[`date +%T`] Removed graph $3 from $1 Knowledge Base&quot;</span>
<a name="l00419"></a>00419         count-triples $1
<a name="l00420"></a>00420         ;;
<a name="l00421"></a>00421   <span class="keyword">remove</span>-list)
<a name="l00422"></a>00422         <span class="keyword">remove</span>-list $1 $3 $4
<a name="l00423"></a>00423         count-triples $1
<a name="l00424"></a>00424         ;;
<a name="l00425"></a>00425   reload)
<a name="l00426"></a>00426         <span class="keyword">remove</span> $1 $3 keep-file
<a name="l00427"></a>00427         echo <span class="stringliteral">&quot;[`date +%T`] Removed graph $3 from $1 Knowledge Base&quot;</span>
<a name="l00428"></a>00428         added=`add $1 $3`
<a name="l00429"></a>00429         <span class="keywordflow">if</span> [ $added -gt 0 ]; then
<a name="l00430"></a>00430                 echo <span class="stringliteral">&quot;[`date +%T`] Added $3 to $1 Knowledge Base&quot;</span>
<a name="l00431"></a>00431         <span class="keywordflow">else</span>
<a name="l00432"></a>00432                 echo <span class="stringliteral">&quot;[`date +%T`] Could Not Add $3 to $1 Knowledge Base&quot;</span>
<a name="l00433"></a>00433         fi
<a name="l00434"></a>00434 
<a name="l00435"></a>00435         count-triples $1
<a name="l00436"></a>00436         ;;
<a name="l00437"></a>00437   reload-list)
<a name="l00438"></a>00438         <span class="keyword">remove</span>-list $1 $3 keep-file
<a name="l00439"></a>00439         add-list $1 $3
<a name="l00440"></a>00440         count-triples $1
<a name="l00441"></a>00441         ;;
<a name="l00442"></a>00442   list-graphs)
<a name="l00443"></a>00443         list-graphs $1
<a name="l00444"></a>00444         ;;
<a name="l00445"></a>00445   count-triples)
<a name="l00446"></a>00446         count-triples $1
<a name="l00447"></a>00447         ;;
<a name="l00448"></a>00448   generate-spec)
<a name="l00449"></a>00449         generate-spec $1
<a name="l00450"></a>00450         ;;
<a name="l00451"></a>00451   graph-size)
<a name="l00452"></a>00452         graph-size $1 $3
<a name="l00453"></a>00453         ;;
<a name="l00454"></a>00454   data-dump)
<a name="l00455"></a>00455         data-dump $1
<a name="l00456"></a>00456         ;;
<a name="l00457"></a>00457   generate-linksets)
<a name="l00458"></a>00458         generate-linksets $1
<a name="l00459"></a>00459         ;;
<a name="l00460"></a>00460   generate-voidspec)
<a name="l00461"></a>00461         generate-voidspec $1
<a name="l00462"></a>00462         ;;
<a name="l00463"></a>00463   run-diagnostic)
<a name="l00464"></a>00464         run-diagnostic $1 $3
<a name="l00465"></a>00465         ;;
<a name="l00466"></a>00466   check-versions)
<a name="l00467"></a>00467         check-versions $1
<a name="l00468"></a>00468         ;; 
<a name="l00469"></a>00469   check-entity-sizes)
<a name="l00470"></a>00470         check-entity-sizes
<a name="l00471"></a>00471         ;;
<a name="l00472"></a>00472   update-database)
<a name="l00473"></a>00473         update-database
<a name="l00474"></a>00474         ;;
<a name="l00475"></a>00475   generate-data-and-ontologies-zip)
<a name="l00476"></a>00476         generate-data-and-ontologies-zip $1
<a name="l00477"></a>00477         ;;
<a name="l00478"></a>00478   *)
<a name="l00479"></a>00479         $STORE4_PATH/scripts/sqs_help.sh
<a name="l00480"></a>00480         ;;
<a name="l00481"></a>00481 esac
<a name="l00482"></a>00482 exit 1
</pre></div></div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Wed Apr 10 2013 for MyExperiment RDF by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
